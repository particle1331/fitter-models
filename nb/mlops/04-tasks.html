
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Distributed Task Queues &#8212; OK Transformer</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=564be945" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'nb/mlops/04-tasks';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Model Deployment" href="04-deployment/notes.html" />
    <link rel="prev" title="Experiment Tracking" href="03-mlflow.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="OK Transformer - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="OK Transformer - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Deep Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../dl/01-intro.html">Introduction to NNs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dl/02-optim.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dl/00-backprop.html">Backpropagation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dl/03-cnn.html">Convolutional Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dl/04-lm.html">Language Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dl/05-training.html">Activations and Gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dl/07-attention.html">Attention and Transformers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ML Engineering &amp; MLOps</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-intro.html">Preliminaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-package.html">Packaging Modeling Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="03-mlflow.html">Experiment Tracking</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Distributed Task Queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-deployment/notes.html">Model Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="06-best-practices/notes.html">Best Engineering Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mle/cicd-pipelines.html">Continuous Integration and Deployment Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mle/model-serving-api.html">Prediction Serving API</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Notes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../notes/containers.html">Docker Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notes/tf-course.html">TensorFlow Crash Course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notes/benchmarking.html">Benchmarking and Profiling</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/particle1331/ok-transformer" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/particle1331/ok-transformer/issues/new?title=Issue%20on%20page%20%2Fnb/mlops/04-tasks.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Distributed Task Queues</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#celery-application">Celery application</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#services">Services</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workers">Workers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tasks">Tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flower-ui">Flower UI</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#celery-config">Celery config</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#acknowledgement">Acknowledgement</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#revoking-tasks">Revoking tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stopping-a-worker-process">Stopping a worker process</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#task-prioritization">Task prioritization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tasks-and-results-api">Tasks and Results API</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tasks-endpoints">Tasks endpoints</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results-endpoints">Results endpoints</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pending-and-active-tasks">Pending and active tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#total-pending-tasks">Total pending tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#task-abort-and-revoke">Task abort and revoke</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#revoke-pending-test">Revoke pending test</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#abort-active-test">Abort active test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-further-celery">Appendix: Further Celery</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-options">More options</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows">Workflows</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#signals">Signals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#broker-config">Broker config</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-task-routing">Appendix: Task routing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-periodic-tasks">Appendix: Periodic tasks</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="distributed-task-queues">
<span id="mlops-04-tasks"></span><h1>Distributed Task Queues<a class="headerlink" href="#distributed-task-queues" title="Link to this heading">#</a></h1>
<p><img alt="Status" src="https://img.shields.io/static/v1.svg?label=Status&amp;message=Finished&amp;color=brightgreen" />
<a class="reference external" href="https://github.com/particle1331/ok-transformer/blob/master/docs/nb/mlops/04-tasks"><img alt="Source" src="https://img.shields.io/static/v1.svg?label=GitHub&amp;message=Source&amp;color=181717&amp;logo=GitHub" /></a>
<a class="reference external" href="https://github.com/particle1331/ok-transformer"><img alt="Stars" src="https://img.shields.io/github/stars/particle1331/ok-transformer?style=social" /></a></p>
<hr class="docutils" />
<p><strong>Source:</strong> <a class="github reference external" href="https://github.com/particle1331/distributed-task-queue">particle1331/distributed-task-queue</a></p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>Prediction systems (e.g. offline or batch) can be modeled as workers picking up on a task queue. In this notebook, we will look at an implementation of such a system. The workers will be distributed in the sense that each worker runs in its own container. We will use the open-source framework <a class="reference external" href="https://docs.celeryq.dev/en/stable/index.html">Celery</a>:</p>
<blockquote>
<div><p>Celery is a simple, flexible, and reliable distributed system to process vast amounts of messages, while providing operations with the tools required to maintain such a system. It’s a task queue with focus on real-time processing, while also supporting task scheduling.</p>
</div></blockquote>
<p>An overview of the system is depicted in <a class="reference internal" href="#celery-arch"><span class="std std-numref">Fig. 88</span></a>:</p>
<figure class="align-default" id="celery-arch">
<img alt="../../_images/04-celery-arch.png" src="../../_images/04-celery-arch.png" />
<figcaption>
<p><span class="caption-number">Fig. 88 </span><span class="caption-text">Four components of the distributed task system. A task server <strong>produces</strong> standard tasks which are <strong>consumed</strong> by worker instances. A fault-tolerant message broker distributes the tasks reliably to the workers. The results backend is used for storing results which can be queried asynchronously.</span><a class="headerlink" href="#celery-arch" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>In particular, we will consider the scenario where we have (1) instances running long-running tasks on two processes such that (2) the instance can terminate any time (e.g. with autoscaling). Any time-consuming or resource-intensive computation that can be offloaded from the main application as background task such as ML model training and batch inference can be orchestrated using this approach.</p>
</section>
<section id="celery-application">
<h2>Celery application<a class="headerlink" href="#celery-application" title="Link to this heading">#</a></h2>
<p>Any machine with a copy of the Celery application code and a connection to the broker is automatically a part of the distributed system. This is demonstrated below by connecting our local machine to the broker and pushing tasks to the queue. So first we have to install the app library <a class="github reference external" href="https://github.com/particle1331/distributed-task-queue:">particle1331/distributed-task-queue:</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>rm<span class="w"> </span>-rf<span class="w"> </span>./task-queue/distributed-task-queue
<span class="o">!</span>git<span class="w"> </span>clone<span class="w"> </span>--single-branch<span class="w"> </span>--branch<span class="w"> </span>main<span class="w"> </span>https://github.com/particle1331/distributed-task-queue.git<span class="w"> </span>./task-queue/distributed-task-queue<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>git+https://github.com/particle1331/distributed-task-queue.git@main<span class="w"> </span>--force-reinstall<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\nSuccessfully installed: </span><span class="k">$(</span>pip<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>distributed-task-queue<span class="k">)</span><span class="s2">/</span><span class="k">$(</span>wget<span class="w"> </span>--header<span class="o">=</span><span class="s1">&#39;Accept: application/vnd.github.VERSION.sha&#39;</span><span class="w"> </span>-qO-<span class="w"> </span>commit_id<span class="w">  </span>http://api.github.com/repos/particle1331/distributed-task-queue/commits/main<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-c<span class="w"> </span><span class="m">7</span><span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cloning into &#39;./task-queue/distributed-task-queue&#39;...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Enumerating objects: 222, done.
remote: Counting objects: 100% (108/108), done.
remote: Compressing objects: 100% (48/48), done.
remote: Total 222 (delta 85), reused 60 (delta 60), pack-reused 114
Receiving objects: 100% (222/222), 1.05 MiB | 1.99 MiB/s, done.
Resolving deltas: 100% (125/125), done.
  Running command git clone --filter=blob:none --quiet https://github.com/particle1331/distributed-task-queue.git /private/var/folders/jq/9vsvd9252_349lsng_5gc_jw0000gn/T/pip-req-build-5c0aoav6

Successfully installed: distributed-task-queue        0.0.0/60efa9b
</pre></div>
</div>
</div>
</div>
<p>The code is also copied for building the app locally later:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="p">;</span> <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;./task-queue/&quot;</span><span class="p">)</span>
<span class="o">!</span>tree<span class="w"> </span>./distributed-task-queue
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Blue">./distributed-task-queue</span>
├── Dockerfile.api
├── Dockerfile.worker
├── LICENSE
├── Makefile
├── README.md
├── <span class=" -Color -Color-Bold -Color-Bold-Blue">api</span>
│   ├── __init__.py
│   ├── main.py
│   ├── models.py
│   ├── requirements.txt
│   ├── results.py
│   ├── tasks.py
│   └── utils.py
├── architecture.png
├── docker-compose.yml
├── <span class=" -Color -Color-Bold -Color-Bold-Blue">dtq</span>
│   ├── __init__.py
│   ├── app.py
│   ├── requirements.txt
│   └── tasks.py
├── pyproject.toml
└── setup.cfg

3 directories, 20 files
</pre></div>
</div>
</div>
</div>
<p>Finally, we configure the connection:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_HOST&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_PORT&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;6379&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;RABBITMQ_HOST&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;RABBITMQ_PORT&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5672&quot;</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Remark.</strong> One caveat is that task producers and deployed workers can have different versions of the code. This can be fixed by containerization and orchestrating rebuilds.</p>
<section id="services">
<h3>Services<a class="headerlink" href="#services" title="Link to this heading">#</a></h3>
<p>In this section, we will send tasks to the workers directly using our copy of the <code class="docutils literal notranslate"><span class="pre">dtq</span></code> code. This contains the configured Celery app which at this point is already connected to the broker. See diagram above (<a class="reference internal" href="#celery-arch"><span class="std std-numref">Fig. 88</span></a>) with the Tasks API replaced by a terminal. The ensemble of services will be built and run using <a class="reference internal" href="../notes/containers.html#containers"><span class="std std-ref">Docker compose</span></a>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.api</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8000:8000&quot;</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_HOST=redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_PORT=6379</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_HOST=rabbitmq</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_PORT=5672</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;--port&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;8000&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;--host&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;0.0.0.0&quot;</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.worker</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_HOST=redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_PORT=6379</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_HOST=rabbitmq</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_PORT=5672</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;-A&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;dtq.app&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;worker&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;--concurrency&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-l&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis:latest</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;6379:6379&quot;</span>

<span class="w">  </span><span class="nt">rabbitmq</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq:3.12.0-management</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5672:5672&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;15672:15672&quot;</span>

<span class="w">  </span><span class="nt">flower</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mher/flower</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5555:5555&quot;</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;celery&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--broker=amqp://guest@rabbitmq:5672//&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;flower&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--broker_api=http://guest:guest@rabbitmq:15672/api//&quot;</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq</span>
</pre></div>
</div>
<p>Running the stack in the background:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>./distributed-task-queue/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>--build
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>?25l[+] Building 0.0s (0/0)                                    docker:desktop-linux
?25h?25l[+] Building 0.0s (0/0)                                    docker:desktop-linux
?25h?25l[+] Building 0.0s (0/2)                                    docker:desktop-linux
?25h?25l[+] Building 0.2s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.1s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 0.3s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.3s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 0.5s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.4s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 0.6s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.6s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 0.8s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.7s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 0.9s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.9s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 1.1s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.0s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 1.2s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.2s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 1.4s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.3s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 1.5s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.5s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 1.7s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.6s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 1.8s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.8s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.0s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  1.9s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.1s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  2.1s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.3s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  2.2s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.4s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  2.4s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.6s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  2.5s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.7s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  2.7s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 2.9s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  2.8s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.0s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  3.0s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.2s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  3.1s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.3s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  3.3s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.5s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  3.4s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.6s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  3.6s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.8s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  3.7s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 3.9s (14/20)                                  docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load metadata for docker.io/library/python:3.9.15-slim  3.8s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build context                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 1.21kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api 1/7] FROM docker.io/library/python:3.9.15-slim@sha256:ffc6cb648d  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build context                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 7.08kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 2/7] WORKDIR /opt                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 3/7] COPY ./dtq/requirements.txt .                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 4/7] RUN pip install -r requirements.txt                0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 5/7] RUN pip install setproctitle                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 6/7] RUN apt-get update &amp;&amp; apt-get install -y procps    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 7/7] COPY /dtq/ ./dtq/                                  0.0s</span>
?25h?25l[+] Building 4.0s (22/22)                                  docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build context                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 7.08kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 2/7] WORKDIR /opt                                          0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 3/7] COPY ./dtq/requirements.txt .                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 4/7] RUN pip install -r requirements.txt                0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 5/7] RUN pip install setproctitle                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 6/7] RUN apt-get update &amp;&amp; apt-get install -y procps    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 7/7] COPY /dtq/ ./dtq/                                  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker] exporting to image                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:15aacea1a3c26b4263b28bf091223528cc5e3a4741206  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-worker           0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 3/8] COPY ./dtq/requirements.txt dtq-requirements.txt      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 4/8] COPY ./api/requirements.txt api-requirements.txt      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 5/8] RUN pip install -r dtq-requirements.txt               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 6/8] RUN pip install -r api-requirements.txt               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 7/8] COPY ./dtq ./dtq                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 8/8] COPY ./api .                                          0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api] exporting to image                                               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:233ecd18c4b7096d01414d847d731453fa972188b0bc2  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-api              0.0s</span>
?25h?25l[+] Building 4.0s (22/22) FINISHED                         docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load metadata for docker.io/library/python:3.9.15-slim  3.8s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build context                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 1.21kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api 1/7] FROM docker.io/library/python:3.9.15-slim@sha256:ffc6cb648d  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build context                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 7.08kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 2/7] WORKDIR /opt                                          0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 3/7] COPY ./dtq/requirements.txt .                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 4/7] RUN pip install -r requirements.txt                0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 5/7] RUN pip install setproctitle                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 6/7] RUN apt-get update &amp;&amp; apt-get install -y procps    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 7/7] COPY /dtq/ ./dtq/                                  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker] exporting to image                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:15aacea1a3c26b4263b28bf091223528cc5e3a4741206  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-worker           0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 3/8] COPY ./dtq/requirements.txt dtq-requirements.txt      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 4/8] COPY ./api/requirements.txt api-requirements.txt      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 5/8] RUN pip install -r dtq-requirements.txt               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 6/8] RUN pip install -r api-requirements.txt               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 7/8] COPY ./dtq ./dtq                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 8/8] COPY ./api .                                          0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api] exporting to image                                               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:233ecd18c4b7096d01414d847d731453fa972188b0bc2  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-api              0.0s</span>
?25h?25l[+] Running 0/0
 ⠋ Network distributed-task-queue_default  Creating                        <span class=" -Color -Color-Blue">0.0s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 1/1</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Creating                   <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-redis-1     Creating                   <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 3/3</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-flower-1    Creating                   <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-worker-2    Creating                   <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-worker-1    Creating                   <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-api-1       Creating                   <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Created</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Started</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>./distributed-task-queue/docker-compose.yml<span class="w"> </span>ps<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NAME                                IMAGE                           COMMAND                  SERVICE    CREATED         STATUS                  PORTS
distributed-task-queue-api-1        distributed-task-queue-api      &quot;uvicorn main:app --…&quot;   api        3 seconds ago   Up Less than a second   0.0.0.0:8000-&gt;8000/tcp
distributed-task-queue-flower-1     mher/flower                     &quot;celery --broker=amq…&quot;   flower     3 seconds ago   Up Less than a second   0.0.0.0:5555-&gt;5555/tcp
distributed-task-queue-rabbitmq-1   rabbitmq:3.12.0-management      &quot;docker-entrypoint.s…&quot;   rabbitmq   3 seconds ago   Up 1 second             4369/tcp, 5671/tcp, 0.0.0.0:5672-&gt;5672/tcp, 15671/tcp, 15691-15692/tcp, 25672/tcp, 0.0.0.0:15672-&gt;15672/tcp
distributed-task-queue-redis-1      redis:latest                    &quot;docker-entrypoint.s…&quot;   redis      3 seconds ago   Up 1 second             0.0.0.0:6379-&gt;6379/tcp
distributed-task-queue-worker-1     distributed-task-queue-worker   &quot;celery -A dtq.app w…&quot;   worker     3 seconds ago   Up Less than a second   
distributed-task-queue-worker-2     distributed-task-queue-worker   &quot;celery -A dtq.app w…&quot;   worker     3 seconds ago   Up Less than a second   
</pre></div>
</div>
</div>
</div>
<p>Before proceeding we check whether all system components are available:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">redis</span> <span class="kn">import</span> <span class="n">StrictRedis</span>
<span class="kn">from</span> <span class="nn">dtq.app</span> <span class="kn">import</span> <span class="n">app</span>

<span class="k">def</span> <span class="nf">healthcheck</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ping and wait up to one second for responses.&quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">StrictRedis</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_HOST&quot;</span><span class="p">],</span> 
        <span class="n">port</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_PORT&quot;</span><span class="p">],</span>
        <span class="n">socket_timeout</span><span class="o">=</span><span class="mi">3</span>
    <span class="p">)</span>
    <span class="n">workers</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>  <span class="c1"># True if at least one response</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">workers</span><span class="p">)</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>


<span class="n">MAX_RETRIES</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">MAX_RETRIES</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">healthcheck</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Celery app connection is established.&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">MAX_RETRIES</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Celery results backend or workers unavailable.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Celery app connection is established.
</pre></div>
</div>
</div>
</div>
</section>
<section id="workers">
<h3>Workers<a class="headerlink" href="#workers" title="Link to this heading">#</a></h3>
<p>Building a worker simply involves providing a copy of the Celery application code:</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># ./Dockerfile.worker</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9.15-slim</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/opt</span>

<span class="k">COPY</span><span class="w"> </span>./dtq/requirements.txt<span class="w"> </span>.

<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>setproctitle
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>procps

<span class="k">COPY</span><span class="w"> </span>/dtq/<span class="w"> </span>./dtq/

<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;celery&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>From the compose file, two replicas of the <code class="docutils literal notranslate"><span class="pre">worker</span></code> service is built. Each worker runs the ff. command at startup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">celery</span> <span class="o">-</span><span class="n">A</span> <span class="n">dtq</span><span class="o">.</span><span class="n">app</span> <span class="n">worker</span> <span class="o">--</span><span class="n">concurrency</span> <span class="mi">2</span> <span class="o">-</span><span class="n">l</span> <span class="n">INFO</span>
</pre></div>
</div>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>💡 See <a class="reference external" href="https://celery.school/celery-worker-pools">worker pool types</a>.</p>
</aside>
<p>This runs two <strong>worker processes</strong> for each worker with log level INFO. It is recommended to set concurrency equal to the CPU count of the worker machine. Here we set to 2 for simplicity. Distinguishing between the worker and its processes is important when reading the documentation.</p>
<p>Installing <code class="docutils literal notranslate"><span class="pre">setproctitle</span></code> allows us to see the type of process in <code class="docutils literal notranslate"><span class="pre">ps</span></code> listings. The worker runs two child processes and a main worker process:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-1<span class="w"> </span>ps<span class="w"> </span>aux
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  8.9  0.9  45876 38032 ?        Ss   20:56   0:01 [celeryd: celery@364128f8e977:MainProcess] -active- (-A dtq.app worker --concurrency 2 -l INFO)
root         8  0.0  0.8  43484 32996 ?        S    20:56   0:00 [celeryd: celery@364128f8e977:ForkPoolWorker-1]
root         9  0.0  0.8  43488 32868 ?        S    20:56   0:00 [celeryd: celery@364128f8e977:ForkPoolWorker-2]
root        10  0.0  0.0   8336  2688 ?        Rs   20:57   0:00 ps aux
</pre></div>
</div>
</div>
</div>
</section>
<section id="tasks">
<h3>Tasks<a class="headerlink" href="#tasks" title="Link to this heading">#</a></h3>
<p>Tasks are the building blocks of Celery applications. Every task class has a unique name, and this name is referenced in broker messages so a worker can find the right function to execute. Ideally task functions should be <strong>idempotent</strong>, i.e. can be called multiple times with the same arguments with no side-effects.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dtq.tasks</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="o">??</span>sleep
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Red">Signature:</span>       sleep<span class=" -Color -Color-Blue">(</span>wait<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">0</span><span class=" -Color -Color-Blue">,</span> return_value<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">1</span><span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Call signature:</span>  sleep<span class=" -Color -Color-Blue">(*</span>a<span class=" -Color -Color-Blue">,</span> <span class=" -Color -Color-Blue">**</span>kw<span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Type:</span>            PromiseProxy
<span class=" -Color -Color-Red">String form:</span>     &lt;@task: dtq.tasks.sleep of distributed-task-queue at 0x10554cbb0&gt;
<span class=" -Color -Color-Red">File:</span>            ~/opt/miniconda3/envs/tasks/lib/python3.9/site-packages/dtq/tasks.py
<span class=" -Color -Color-Red">Source:</span>         
<span class=" -Color -Color-Blue">@</span>app<span class=" -Color -Color-Blue">.</span>task
<span class=" -Color -Color-Green">def</span> sleep<span class=" -Color -Color-Blue">(</span>wait<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">0</span><span class=" -Color -Color-Blue">,</span> return_value<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">1</span><span class=" -Color -Color-Blue">):</span>
    time<span class=" -Color -Color-Blue">.</span>sleep<span class=" -Color -Color-Blue">(</span>wait<span class=" -Color -Color-Blue">)</span>
    <span class=" -Color -Color-Green">return</span> return_value
<span class=" -Color -Color-Red">Class docstring:</span>
Task base class.

Note:
    When called tasks apply the :meth:`run` method.  This method must
    be defined by all tasks (that is unless the :meth:`__call__` method
    is overridden).
</pre></div>
</div>
</div>
</div>
<p>Tasks pushed to the queue will have not have results until it has been fully processed by a worker, so its return value is an <code class="docutils literal notranslate"><span class="pre">celery.result.AsyncResult</span></code> object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AsyncResult: ada4cc70-9b55-4da5-a8e3-4385ce98b8f6&gt;
</pre></div>
</div>
</div>
</div>
<p>Getting the actual result. This will <strong>block</strong> execution until result is ready:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time elapsed: </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
Time elapsed: 3.046s
</pre></div>
</div>
</div>
</div>
<p>A task that has an exception is <strong>acknowledged</strong> (i.e. removed from the queue) with <code class="docutils literal notranslate"><span class="pre">FAILURE</span></code> state:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dtq.tasks</span> <span class="kn">import</span> <span class="n">random_fail</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">random_fail</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
        <span class="k">break</span>

<span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">result</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;c8e5beaa-8da6-442e-8c94-2276d9c6051a&#39;,
 &#39;FAILURE&#39;,
 ZeroDivisionError(&#39;division by zero&#39;))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">??</span>random_fail
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Red">Signature:</span>       random_fail<span class=" -Color -Color-Blue">()</span>
<span class=" -Color -Color-Red">Call signature:</span>  random_fail<span class=" -Color -Color-Blue">(*</span>a<span class=" -Color -Color-Blue">,</span> <span class=" -Color -Color-Blue">**</span>kw<span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Type:</span>            PromiseProxy
<span class=" -Color -Color-Red">String form:</span>     &lt;@task: dtq.tasks.random_fail of distributed-task-queue at 0x10554cbb0&gt;
<span class=" -Color -Color-Red">File:</span>            ~/opt/miniconda3/envs/tasks/lib/python3.9/site-packages/dtq/tasks.py
<span class=" -Color -Color-Red">Source:</span>         
<span class=" -Color -Color-Blue">@</span>app<span class=" -Color -Color-Blue">.</span>task
<span class=" -Color -Color-Green">def</span> random_fail<span class=" -Color -Color-Blue">():</span>
    time<span class=" -Color -Color-Blue">.</span>sleep<span class=" -Color -Color-Blue">(</span><span class=" -Color -Color-Cyan">0.1</span><span class=" -Color -Color-Blue">)</span>
    x <span class=" -Color -Color-Blue">=</span> random<span class=" -Color -Color-Blue">.</span>choice<span class=" -Color -Color-Blue">([</span><span class=" -Color -Color-Cyan">0</span><span class=" -Color -Color-Blue">,</span> <span class=" -Color -Color-Cyan">1</span><span class=" -Color -Color-Blue">])</span>
    <span class=" -Color -Color-Green">return</span> <span class=" -Color -Color-Cyan">1</span> <span class=" -Color -Color-Blue">/</span> x
<span class=" -Color -Color-Red">Class docstring:</span>
Task base class.

Note:
    When called tasks apply the :meth:`run` method.  This method must
    be defined by all tasks (that is unless the :meth:`__call__` method
    is overridden).
</pre></div>
</div>
</div>
</div>
</section>
<section id="flower-ui">
<h3>Flower UI<a class="headerlink" href="#flower-ui" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://flower.readthedocs.io/en/latest/">Flower</a> UI can be used to visualize task results. Flower has an <a class="reference external" href="https://flower.readthedocs.io/en/latest/api.html">extensive API</a> for sending and querying tasks and changing worker configurations, but as mentioned above we will develop our own tasks and results API for our use-case.</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="n">TAKE_SCREENSHOT</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">def</span> <span class="nf">take_screenshot</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">savename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mf">4.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Automate taking screenshot of our services&#39; UI / docs. This requires chromedriver:</span>
<span class="sd">    https://www.geeksforgeeks.org/how-to-run-selenium-running-test-on-chrome-using-webdriver/&quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s2">&quot;/usr/local/bin/chromedriver&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">TAKE_SCREENSHOT</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--headless&quot;</span><span class="p">)</span>
        <span class="n">options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--window-size=1200,660&quot;</span><span class="p">)</span>

        <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="n">viewport_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;return window.innerHeight&quot;</span><span class="p">))</span>
        <span class="n">viewport_width</span>  <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;return window.innerWidth&quot;</span><span class="p">))</span>
        <span class="n">new_viewport_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">viewport_height</span> <span class="o">*</span> <span class="p">(</span><span class="mi">100</span> <span class="o">/</span> <span class="n">zoom</span><span class="p">))</span>
        <span class="n">new_viewport_width</span>  <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">viewport_width</span>  <span class="o">*</span> <span class="p">(</span><span class="mi">100</span> <span class="o">/</span> <span class="n">zoom</span><span class="p">))</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">set_window_size</span><span class="p">(</span><span class="n">new_viewport_width</span><span class="p">,</span> <span class="n">new_viewport_height</span><span class="p">)</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">save_screenshot</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">savename</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>


<span class="c1"># Getting failed task example</span>
<span class="n">FLOWER_URL</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:5555&quot;</span>
<span class="n">take_screenshot</span><span class="p">(</span><span class="n">FLOWER_URL</span> <span class="o">+</span> <span class="s2">&quot;/tasks&quot;</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="s2">&quot;./img/04-celery-tasks&quot;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">take_screenshot</span><span class="p">(</span><span class="n">FLOWER_URL</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;/task/</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="s2">&quot;./img/04-celery-stacktrace&quot;</span><span class="p">)</span>
<span class="n">take_screenshot</span><span class="p">(</span><span class="n">FLOWER_URL</span> <span class="o">+</span> <span class="s2">&quot;/workers&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;./img/04-celery-workers-tasks&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<figure class="align-default" id="celery-tasks">
<img alt="../../_images/04-celery-tasks.png" src="../../_images/04-celery-tasks.png" />
<figcaption>
<p><span class="caption-number">Fig. 89 </span><span class="caption-text">Tasks shown in the Flower UI. Observe that tasks are automatically distributed to each worker:</span><a class="headerlink" href="#celery-tasks" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="celery-stacktrace">
<img alt="../../_images/04-celery-stacktrace.png" src="../../_images/04-celery-stacktrace.png" />
<figcaption>
<p><span class="caption-number">Fig. 90 </span><span class="caption-text">Stack trace of failed task is also included in the UI.</span><a class="headerlink" href="#celery-stacktrace" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="celery-workers-tasks">
<img alt="../../_images/04-celery-workers-tasks.png" src="../../_images/04-celery-workers-tasks.png" />
<figcaption>
<p><span class="caption-number">Fig. 91 </span><span class="caption-text">Counts for successful and failed tasks by worker are shown in Flower.</span><a class="headerlink" href="#celery-workers-tasks" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="celery-config">
<h2>Celery config<a class="headerlink" href="#celery-config" title="Link to this heading">#</a></h2>
<p>Depending on the use-case and program behavior that you want to achieve, you will have to spend some time reading the <a class="reference external" href="https://docs.celeryq.dev/en/latest/userguide/configuration.html">docs</a> to get the correct config variables and testing if the settings achieve the desired behavior. In this section, we will focus on the contents of <code class="docutils literal notranslate"><span class="pre">CELERY_CONFIG</span></code>. Each key of this dictionary is a configuration variable. All configuration variables can be accessed as a dict object in <code class="docutils literal notranslate"><span class="pre">app.conf</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./dtq/app.py</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Celery</span>

<span class="n">REDIS_HOST</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_HOST&quot;</span><span class="p">]</span>
<span class="n">REDIS_PORT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_PORT&quot;</span><span class="p">]</span>
<span class="n">RABBITMQ_HOST</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;RABBITMQ_HOST&quot;</span><span class="p">]</span>
<span class="n">RABBITMQ_PORT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;RABBITMQ_PORT&quot;</span><span class="p">]</span>

<span class="n">PROJECT_NAME</span> <span class="o">=</span> <span class="s2">&quot;distributed-task-queue&quot;</span>
<span class="n">BACKEND_URL</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;redis://</span><span class="si">{</span><span class="n">REDIS_HOST</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">REDIS_PORT</span><span class="si">}</span><span class="s2">/0&quot;</span>
<span class="n">BROKER_URL</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pyamqp://guest:guest@</span><span class="si">{</span><span class="n">RABBITMQ_HOST</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">RABBITMQ_PORT</span><span class="si">}</span><span class="s2">//&quot;</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span>
    <span class="n">PROJECT_NAME</span><span class="p">,</span>
    <span class="n">broker</span><span class="o">=</span><span class="n">BROKER_URL</span><span class="p">,</span>
    <span class="n">backend</span><span class="o">=</span><span class="n">BACKEND_URL</span><span class="p">,</span>
    <span class="n">include</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;dtq.tasks&quot;</span><span class="p">,),</span>
<span class="p">)</span>


<span class="n">CELERY_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;task_acks_late&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;worker_prefetch_multiplier&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;task_default_priority&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;task_queue_max_priority&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;task_create_missing_queues&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;result_expires&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s2">&quot;result_extended&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">CELERY_CONFIG</span><span class="p">)</span>
</pre></div>
</div>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p><a class="reference external" href="https://stackoverflow.com/questions/29845191/why-are-distributed-systems-considered-complex">Distributed computing is hard</a></p>
</aside>
<p><strong>Remark.</strong> Results expire in 1 day by default, so we set <code class="docutils literal notranslate"><span class="pre">'results_expires'</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>. This is bad in practice, as we can easily run out of storage. This highlights the fact that Celery config has a lot of sharp corners. Similarly, the broker needs <a class="reference internal" href="#mlops-04-tasks-broker-config"><span class="std std-ref">specific configuration</span></a>. There is really no way around it but reading the docs and experimenting certain scenarios.</p>
<section id="acknowledgement">
<h3>Acknowledgement<a class="headerlink" href="#acknowledgement" title="Link to this heading">#</a></h3>
<p>A task message is not removed from the queue until it has been <strong>acknowledged</strong> by a worker. A worker can reserve many messages in advance, and even if the worker is killed (e.g. when autoscaling) the message may be redelivered to another worker. The default behavior is that a task is acknowledged once a worker starts processing a task:</p>
<blockquote>
<div><p>Since the worker cannot detect if your tasks are idempotent, the default behavior is to acknowledge the message in advance, just before it’s executed, so that a task invocation that already started is never executed again.</p>
</div></blockquote>
<p>For our use-case, we set <code class="docutils literal notranslate"><span class="pre">task_acks_late</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> so that received tasks are not acknowledged until it is completed. This is nice since it allows tasks to remain in the queue so that other workers can pick it up whenever one worker is terminated.
Messages in the broker which are not yet received by a worker are called <strong>ready</strong>.</p>
<p><strong>Remark.</strong> Note that worker shutdown is different from simply <a class="reference internal" href="#mlops-04-tasks-killing-worker-process"><span class="std std-ref">killing a worker process</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mf">6.0</span><span class="p">)</span>
    <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="celery-unacked">
<img alt="../../_images/04-celery-unacked.png" src="../../_images/04-celery-unacked.png" />
<figcaption>
<p><span class="caption-number">Fig. 92 </span><span class="caption-text">Message counts in the broker tab showing the count of unacklowleged tasks in the queue.
This shows 2 ready and 4 unacknowledged messages.
This makes sense since we are queueing 6 tasks, while we only have 4 worker processes.</span><a class="headerlink" href="#celery-unacked" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><strong>Remark.</strong> Messages equals the sum of unacked and ready (<a class="reference internal" href="#celery-unacked"><span class="std std-numref">Fig. 92</span></a>). This is not true by default. We configured Celery so that a task is acknowledged only after a worker is done processing it. The default behavior is that a task is acknowledged once a worker starts processing a task:</p>
<blockquote>
<div><p>Since the worker cannot detect if your tasks are idempotent, the default behavior is to acknowledge the message in advance, just before it’s executed, so that a task invocation that already started is never executed again.</p>
</div></blockquote>
<br><p>Let us demonstrate redelivery of tasks when a worker is terminated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">dtq.app</span> <span class="kn">import</span> <span class="n">app</span>

<span class="k">def</span> <span class="nf">get_active_tasks</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">inspector</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">active</span><span class="p">()</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">worker</span> <span class="ow">in</span> <span class="n">active</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">active</span><span class="p">[</span><span class="n">worker</span><span class="p">]:</span>
            <span class="n">delivery_info</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;delivery_info&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">delivery_info</span><span class="p">)</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>


<span class="n">result</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
<span class="n">get_active_tasks</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>args</th>
      <th>kwargs</th>
      <th>type</th>
      <th>hostname</th>
      <th>time_start</th>
      <th>acknowledged</th>
      <th>worker_pid</th>
      <th>task_id</th>
      <th>exchange</th>
      <th>routing_key</th>
      <th>priority</th>
      <th>redelivered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>dtq.tasks.sleep</td>
      <td>[]</td>
      <td>{'wait': 1200}</td>
      <td>dtq.tasks.sleep</td>
      <td>celery@364128f8e977</td>
      <td>1.708635e+09</td>
      <td>False</td>
      <td>9</td>
      <td>66c4f6df-96bd-4f3b-85ab-3be2427fc7c7</td>
      <td></td>
      <td>celery</td>
      <td>0</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Shutting down this worker:</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">active_tasks</span> <span class="o">=</span> <span class="n">get_active_tasks</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;task_id==&#39;</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">task_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="n">worker_id</span> <span class="o">=</span> <span class="n">active_tasks</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;hostname&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;celery@&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="o">!</span>docker<span class="w"> </span>restart<span class="w"> </span><span class="o">{</span>worker_id<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<p>Task should be picked up by the other worker. Notice <code class="docutils literal notranslate"><span class="pre">redelivered</span></code> is now <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_active_tasks</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>args</th>
      <th>kwargs</th>
      <th>type</th>
      <th>hostname</th>
      <th>time_start</th>
      <th>acknowledged</th>
      <th>worker_pid</th>
      <th>task_id</th>
      <th>exchange</th>
      <th>routing_key</th>
      <th>priority</th>
      <th>redelivered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>dtq.tasks.sleep</td>
      <td>[]</td>
      <td>{'wait': 1200}</td>
      <td>dtq.tasks.sleep</td>
      <td>celery@bdfaad682753</td>
      <td>1.708635e+09</td>
      <td>False</td>
      <td>9</td>
      <td>66c4f6df-96bd-4f3b-85ab-3be2427fc7c7</td>
      <td></td>
      <td>celery</td>
      <td>0</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<br></section>
<section id="revoking-tasks">
<h3>Revoking tasks<a class="headerlink" href="#revoking-tasks" title="Link to this heading">#</a></h3>
<p>Tasks can be revoked using <code class="docutils literal notranslate"><span class="pre">app.control.revoke</span></code>. This sets task status to <code class="docutils literal notranslate"><span class="pre">REVOKED</span></code> such that any worker will not pick up this task from the queue. But if the task has already started processing, revoking the task will not cancel it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">ping</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># See remark below</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">revoke</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">task_id</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">task_id</span><span class="si">}</span><span class="s2"> revoked.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Remaining tasks: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">get_active_tasks</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">get_active_tasks</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Task 66c4f6df-96bd-4f3b-85ab-3be2427fc7c7 revoked.
Remaining tasks: 1
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>args</th>
      <th>kwargs</th>
      <th>type</th>
      <th>hostname</th>
      <th>time_start</th>
      <th>acknowledged</th>
      <th>worker_pid</th>
      <th>task_id</th>
      <th>exchange</th>
      <th>routing_key</th>
      <th>priority</th>
      <th>redelivered</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>dtq.tasks.sleep</td>
      <td>[]</td>
      <td>{'wait': 1200}</td>
      <td>dtq.tasks.sleep</td>
      <td>celery@bdfaad682753</td>
      <td>1.708635e+09</td>
      <td>False</td>
      <td>9</td>
      <td>66c4f6df-96bd-4f3b-85ab-3be2427fc7c7</td>
      <td></td>
      <td>celery</td>
      <td>0</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Restarting the worker. Note that task is <strong>not</strong> picked up by the other available worker:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">ping</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># Need always one worker present (i.e. 1 after restarting the other)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="n">active_tasks</span> <span class="o">=</span> <span class="n">get_active_tasks</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;task_id==&#39;</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">task_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="n">worker_id</span> <span class="o">=</span> <span class="n">active_tasks</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;hostname&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;celery@&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Restarting worker celery@</span><span class="si">{</span><span class="n">worker_id</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
<span class="o">!</span>docker<span class="w"> </span>restart<span class="w"> </span><span class="o">{</span>worker_id<span class="o">}</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Remaining tasks: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">get_active_tasks</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Restarting worker celery@bdfaad682753...
Remaining tasks: 0
</pre></div>
</div>
</div>
</div>
<p><strong>Remark.</strong> Note that <code class="docutils literal notranslate"><span class="pre">revoke</span></code> works by sending a broadcast message to all the workers, the workers then keep a list of revoked tasks in memory. When a worker starts up it will synchronize revoked tasks with other workers in the cluster. If all workers restart (or are terminated), the list of revoked ids will also vanish! ⚠</p>
<p>This is bad for our setup since it only has two workers. Indeed, an earlier version of the code had this bug (<a class="reference internal" href="#celery-revoke-broadcast-failed"><span class="std std-numref">Fig. 94</span></a>). A non-fragile setup is therefore to have at least 3 workers. To check worker availability, we do:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;celery@364128f8e977&#39;: {&#39;ok&#39;: &#39;pong&#39;}},
 {&#39;celery@bdfaad682753&#39;: {&#39;ok&#39;: &#39;pong&#39;}}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="stopping-a-worker-process">
<span id="mlops-04-tasks-killing-worker-process"></span><h3>Stopping a worker process<a class="headerlink" href="#stopping-a-worker-process" title="Link to this heading">#</a></h3>
<p>To <strong>abort</strong> an active task without having to restart or terminate a worker,
we can use revoke with <code class="docutils literal notranslate"><span class="pre">terminate=True</span></code>. Note that this will terminate the worker process not the task itself! This distinction is important — the process may have already started processing another task at the point when the signal is sent. Never call this programmatically! ⚠</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">ping</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># See remark above</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> started.&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">revoke</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">terminate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> revoked with SIGTERM.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Remaining tasks: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">get_active_tasks</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Task c1e1324c-19a5-44f3-ae19-e55129ee5e1a started.
Task c1e1324c-19a5-44f3-ae19-e55129ee5e1a revoked with SIGTERM.
Remaining tasks: 0
</pre></div>
</div>
</div>
</div>
<p><strong>Remark.</strong> The revoke function has an optional <code class="docutils literal notranslate"><span class="pre">signal</span></code> argument which defaults to <code class="docutils literal notranslate"><span class="pre">'SIGTERM'</span></code>. This can be the uppercase name of any signal defined in the <a class="reference external" href="https://docs.python.org/dev/library/signal.html#module-signal"><code class="docutils literal notranslate"><span class="pre">signal</span></code></a> module from the standard library. This allows time for cleanup. If the process does not stop after a considerable amount of time, then a <code class="docutils literal notranslate"><span class="pre">'SIGKILL'</span></code> signal may be sent. But this comes with <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/workers.html#stopping-the-worker">some complications</a>.</p>
<br><figure class="align-default" id="celery-revoked-tasks">
<img alt="../../_images/04-celery-revoked-tasks.png" src="../../_images/04-celery-revoked-tasks.png" />
<figcaption>
<p><span class="caption-number">Fig. 93 </span><span class="caption-text">Revoked tasks.</span><a class="headerlink" href="#celery-revoked-tasks" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="celery-revoke-broadcast-failed">
<img alt="../../_images/04-celery-revoke-broadcast-failed.png" src="../../_images/04-celery-revoke-broadcast-failed.png" />
<figcaption>
<p><span class="caption-number">Fig. 94 </span><span class="caption-text">Task revoke fails when <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/workers.html#remote-control">remote broadcast</a> is done improperly. To summarize, only revoke when there is at least one worker. And be careful when shutting down all workers, as data shared by the workers is lost.</span><a class="headerlink" href="#celery-revoke-broadcast-failed" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="task-prioritization">
<span id="task-priority"></span><h3>Task prioritization<a class="headerlink" href="#task-prioritization" title="Link to this heading">#</a></h3>
<p>Suppose we have priority levels for our tasks with higher priority tasks to be processed first once a worker is free. The following config keys seek to accomplish this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;worker_prefetch_multiplier&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;task_default_priority&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;task_queue_max_priority&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;task_create_missing_queues&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The number of reserved messages by each worker process is equal to the prefetch multiplier which defaults to 4. For long-running tasks the network overhead of picking up from the queue is negligible, so setting the prefetch multiplier to 1 is fine. Moreover, this allows messages to be ordered in the queue which is supported by RabbitMQ. Here we have to match the max priority with the correct queue arguments of RabbitMQ (i.e. <code class="docutils literal notranslate"><span class="pre">x-max-priority</span></code> of 10.) This allows us to set a <strong>priority</strong> for each task.</p>
<p>The last variable is for raising <code class="docutils literal notranslate"><span class="pre">QueueNotFound</span></code> when a task is sent to an undefined queue. Without this, client-side logic could send tasks into a queue that is automatically created, but does not have a consuming worker. This can be hard to spot in production.</p>
<p>Sending tasks with priority:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>Here we use <code class="docutils literal notranslate"><span class="pre">apply_async</span></code> which is just <code class="docutils literal notranslate"><span class="pre">delay</span></code> but allows us to set <strong>task parameters</strong> such as <code class="docutils literal notranslate"><span class="pre">priority</span></code> which as configured defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>. Tasks with higher integer priority value should be picked up first when using a RabbitMQ broker:</p>
<figure class="align-default" id="celery-task-priority">
<img alt="../../_images/04-celery-task-priority.png" src="../../_images/04-celery-task-priority.png" />
<figcaption>
<p><span class="caption-number">Fig. 95 </span><span class="caption-text">Tasks ordered by started. Notice that tasks with priority 0 and 1 start first, because they are called first. But once these tasks block the workers, tasks with higher priority are processed first.</span><a class="headerlink" href="#celery-task-priority" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="tasks-and-results-api">
<h2>Tasks and Results API<a class="headerlink" href="#tasks-and-results-api" title="Link to this heading">#</a></h2>
<p>Endpoints for creating tasks are exposed to other parts of the business which input specific metadata that it can use as arguments to the request during downstream processing. This also standardizes task creation and retrieval in one place. Also, using an API ensures that all data communicated between services are validated.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.api</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8000:8000&quot;</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_HOST=redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_PORT=6379</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_HOST=rabbitmq</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_PORT=5672</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;--port&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;8000&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;--host&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;0.0.0.0&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># ... other services</span>
</pre></div>
</div>
<p>Environmental variables are loaded which identify the broker and backend URLs. The container for this is built as follows. It copies both the celery application code and the API code and installs their requirements. Note that the requirements file of the Celery app is used to install its respective dependencies preventing version drift (i.e. <em>celery</em> appears once in the two requirements files).</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># ./Dockerfile.api</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9.15-slim</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/opt</span>

<span class="k">COPY</span><span class="w"> </span>./dtq/requirements.txt<span class="w"> </span>dtq-requirements.txt
<span class="k">COPY</span><span class="w"> </span>./api/requirements.txt<span class="w"> </span>api-requirements.txt
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>dtq-requirements.txt
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>api-requirements.txt

<span class="k">COPY</span><span class="w"> </span>./dtq<span class="w"> </span>./dtq
<span class="k">COPY</span><span class="w"> </span>./api<span class="w"> </span>.

<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8000</span>

<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;uvicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;main:app&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The main module simply loads <code class="docutils literal notranslate"><span class="pre">tasks</span></code> are <code class="docutils literal notranslate"><span class="pre">results</span></code> routers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/main.py</span>
<span class="kn">import</span> <span class="nn">results</span>
<span class="kn">import</span> <span class="nn">tasks</span>
<span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">RedirectResponse</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">router</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">router</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">include_in_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">docs_redirect</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">RedirectResponse</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;/docs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Below <strong>pending</strong> (queued) and <strong>active tasks</strong> (processing) have their specific <strong>schemas</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/models.py</span>
<span class="o">...</span>

<span class="k">class</span> <span class="nc">Task</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">ActiveTask</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">task</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">args</span><span class="p">:</span> <span class="nb">list</span>
    <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="n">worker</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">time_start</span><span class="p">:</span> <span class="n">datetime</span>
    <span class="n">acknowledged</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">redelivered</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">worker_pid</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">PendingTask</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">task</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">retries</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">timelimit</span><span class="p">:</span> <span class="nb">list</span>
    <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">origin</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">args</span><span class="p">:</span> <span class="nb">list</span>
    <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span>

<span class="o">...</span>
</pre></div>
</div>
<br>
<figure class="align-default" id="celery-fastapi-app">
<img alt="../../_images/04-celery-fastapi-app.png" src="../../_images/04-celery-fastapi-app.png" />
<figcaption>
<p><span class="caption-number">Fig. 96 </span><span class="caption-text">FastAPI app port forwarded to <code class="docutils literal notranslate"><span class="pre">localhost:8000</span></code>.</span><a class="headerlink" href="#celery-fastapi-app" title="Link to this image">#</a></p>
</figcaption>
</figure>
<section id="tasks-endpoints">
<h3>Tasks endpoints<a class="headerlink" href="#tasks-endpoints" title="Link to this heading">#</a></h3>
<p>First we look at the first two task endpoints. These push the corresponding tasks to the queue. Here we can add validation for <a class="reference external" href="https://fastapi.tiangolo.com/tutorial/query-params/">query parameters</a> such as constraining <code class="docutils literal notranslate"><span class="pre">wait</span></code> to be nonnegative. Data validation is one of the primary benefits of having an API for producing tasks. Note that the we can now set priorities for each task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/tasks.py</span>
<span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">APIRouter</span><span class="p">,</span> <span class="n">status</span>
<span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">JSONResponse</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">ActiveTask</span><span class="p">,</span> <span class="n">PendingTask</span><span class="p">,</span> <span class="n">Task</span>
<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">exist_workers</span><span class="p">,</span> <span class="n">poll_messages</span>

<span class="kn">from</span> <span class="nn">dtq</span> <span class="kn">import</span> <span class="n">tasks</span>
<span class="kn">from</span> <span class="nn">dtq.app</span> <span class="kn">import</span> <span class="n">app</span> <span class="k">as</span> <span class="n">celery_app</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/tasks&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;tasks&quot;</span><span class="p">])</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/sleep&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Task</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="n">wait</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">return_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">tasks</span><span class="o">.</span><span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span>
        <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wait&quot;</span><span class="p">:</span> <span class="n">wait</span><span class="p">,</span> <span class="s2">&quot;return_value&quot;</span><span class="p">:</span> <span class="n">return_value</span><span class="p">},</span>
        <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">task_id</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;task_id&quot;</span><span class="p">:</span> <span class="n">task_id</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="p">}</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/random_fail&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Task</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">random_fail</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">tasks</span><span class="o">.</span><span class="n">random_fail</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">task_id</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;task_id&quot;</span><span class="p">:</span> <span class="n">task_id</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="p">}</span>

<span class="o">...</span>
</pre></div>
</div>
<p>Trying these out:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">API_URL</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:8000&quot;</span>
<span class="n">sleep_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/sleep?wait=5&amp;return_value=1&amp;priority=0&quot;</span><span class="p">)</span>
<span class="n">sleep_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;304e87be-449c-47c3-8ecb-9b9a21695551&#39;, &#39;status&#39;: &#39;PENDING&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fail_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/random_fail&quot;</span><span class="p">)</span>
<span class="n">fail_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;62fc3ab0-3fca-424e-acb3-5376082a7b8b&#39;, &#39;status&#39;: &#39;PENDING&#39;}
</pre></div>
</div>
</div>
</div>
</section>
<section id="results-endpoints">
<h3>Results endpoints<a class="headerlink" href="#results-endpoints" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">results/{task_id}</span></code> endpoint returns the task result and status. It returns null result when the task is still processing or completed but failed. See the <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/tasks.html#built-in-states">docs</a> for built-in states. Note that Celery assigns the exception for failed tasks in the <code class="docutils literal notranslate"><span class="pre">.result</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">AsyncResult</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/results.py</span>
<span class="kn">from</span> <span class="nn">celery.result</span> <span class="kn">import</span> <span class="n">AsyncResult</span>
<span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">APIRouter</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">Result</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">APIRouter</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/results&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">])</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{task_id}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Result</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_result</span><span class="p">(</span><span class="n">task_id</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">AsyncResult</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;task_id&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">task_id</span><span class="p">,</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
        <span class="s2">&quot;successful&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">successful</span><span class="p">(),</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
        <span class="s2">&quot;kwargs&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="s2">&quot;date_done&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">date_done</span><span class="p">,</span>
        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">result</span><span class="p">,</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The results data model is as follows. Note that result is optional since since a task has delayed result (or <code class="docutils literal notranslate"><span class="pre">None</span></code> when failed). Recall in the configuration we have <code class="docutils literal notranslate"><span class="pre">results_extended</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. This is so that task args and kwargs are sent to the results backend. Here <code class="docutils literal notranslate"><span class="pre">result</span></code> has type <code class="docutils literal notranslate"><span class="pre">str</span></code> since it can be an exception or some return value (e.g. <code class="docutils literal notranslate"><span class="pre">float</span></code> or <code class="docutils literal notranslate"><span class="pre">int</span></code>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/models.py (continued)</span>
<span class="o">...</span>

<span class="k">class</span> <span class="nc">Result</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">successful</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span>
    <span class="n">kwargs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>
    <span class="n">date_done</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_result</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>Sleep task above still running. The <code class="docutils literal notranslate"><span class="pre">successful</span></code> field defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> while others are null.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">task_id</span> <span class="o">=</span> <span class="n">sleep_response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;304e87be-449c-47c3-8ecb-9b9a21695551&#39;,
 &#39;status&#39;: &#39;PENDING&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: None,
 &#39;args&#39;: None,
 &#39;kwargs&#39;: None,
 &#39;date_done&#39;: None}
</pre></div>
</div>
</div>
</div>
<p>Result of the <code class="docutils literal notranslate"><span class="pre">random_fail</span></code> endpoint:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">task_id</span> <span class="o">=</span> <span class="n">fail_response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;62fc3ab0-3fca-424e-acb3-5376082a7b8b&#39;,
 &#39;status&#39;: &#39;FAILURE&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;division by zero&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {},
 &#39;date_done&#39;: &#39;2024-02-22T20:58:38.894050&#39;}
</pre></div>
</div>
</div>
</div>
<p>Note result is the exception as string. Getting the result once the long-running task is done:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.result</span> <span class="kn">import</span> <span class="n">AsyncResult</span>

<span class="n">task_id</span> <span class="o">=</span> <span class="n">sleep_response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">AsyncResult</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">():</span>
    <span class="k">continue</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;http://127.0.0.1:8000/results/</span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;304e87be-449c-47c3-8ecb-9b9a21695551&#39;,
 &#39;status&#39;: &#39;SUCCESS&#39;,
 &#39;successful&#39;: True,
 &#39;result&#39;: &#39;1&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 5.0, &#39;return_value&#39;: 1},
 &#39;date_done&#39;: &#39;2024-02-22T20:58:43.771632&#39;}
</pre></div>
</div>
</div>
</div>
</section>
<section id="pending-and-active-tasks">
<h3>Pending and active tasks<a class="headerlink" href="#pending-and-active-tasks" title="Link to this heading">#</a></h3>
<p>The next endpoints list active and pending tasks. Recall our workers are configured to prefetch one task from the queue. A good mental model is that Celery can only see what the workers can see. For example, revoke does not work when there are no workers! Pending tasks therefore have to be queried directly from RabbitMQ using a library such as <a class="reference external" href="https://github.com/pika/pika">pika</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/utils.py</span>
<span class="o">...</span>

<span class="k">def</span> <span class="nf">poll_messages</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="s2">&quot;celery&quot;</span><span class="p">):</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">pika</span><span class="o">.</span><span class="n">ConnectionParameters</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;RABBITMQ_HOST&quot;</span><span class="p">],</span>
        <span class="n">port</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;RABBITMQ_PORT&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">pika</span><span class="o">.</span><span class="n">BlockingConnection</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="n">queue_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x-max-priority&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">channel</span><span class="p">()</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">queue_declare</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">durable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">queue_args</span><span class="p">)</span>

    <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">basic_get</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="n">queue</span><span class="p">,</span> <span class="n">auto_ack</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">method_frame</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">response</span>
        <span class="k">if</span> <span class="n">method_frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="n">metadata</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="n">headers</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;task&quot;</span><span class="p">,</span>
            <span class="s2">&quot;retries&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timelimit&quot;</span><span class="p">,</span>
            <span class="s2">&quot;root_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;parent_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;origin&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">}</span>
        <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;args&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;argsrepr&quot;</span><span class="p">])</span>
        <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;kwargs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;kwargsrepr&quot;</span><span class="p">])</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">messages</span>
</pre></div>
</div>
<p><strong>Remark.</strong> Queue declare above should match the queue configuration in the main app. Best practice is to have a unified configuration which we import. But here we just hard code.</p>
<p>Getting active tasks (i.e. started by a worker and removed from the queue):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># tasks.py (continued)</span>
<span class="o">...</span>

<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/active&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">active_tasks</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ActiveTask</span><span class="p">]:</span>
    <span class="n">inspector</span> <span class="o">=</span> <span class="n">celery_app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">active</span><span class="p">()</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">worker</span> <span class="ow">in</span> <span class="n">active</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">active</span><span class="p">[</span><span class="n">worker</span><span class="p">]:</span>
            <span class="n">delivery_info</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;delivery_info&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;task&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;worker&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hostname&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">delivery_info</span><span class="p">[</span><span class="s2">&quot;priority&quot;</span><span class="p">]</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;redelivered&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">delivery_info</span><span class="p">[</span><span class="s2">&quot;redelivered&quot;</span><span class="p">]</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/pending&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">pending_tasks</span><span class="p">(</span><span class="n">queue</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;celery&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PendingTask</span><span class="p">]:</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">poll_messages</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">messages</span>

<span class="o">...</span>
</pre></div>
</div>
<p><strong>Remark.</strong> For querying individual active tasks, we can define an endpoint that uses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inspector</span><span class="o">.</span><span class="n">query_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
</pre></div>
</div>
<br>
<p>Queueing up some tasks to try out the endpoints:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/sleep?wait=3&amp;return_value=1&amp;priority=0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Expecting a list of length four corresponding to four worker processes:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">active</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/active&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">active</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;task_id&#39;: &#39;7b0dee69-aab7-4033-ada7-c9f7f84f2437&#39;,
  &#39;task&#39;: &#39;dtq.tasks.sleep&#39;,
  &#39;args&#39;: [],
  &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1},
  &#39;worker&#39;: &#39;celery@bdfaad682753&#39;,
  &#39;time_start&#39;: &#39;2024-02-22T20:58:43.799137Z&#39;,
  &#39;acknowledged&#39;: False,
  &#39;priority&#39;: 0,
  &#39;redelivered&#39;: False,
  &#39;worker_pid&#39;: 9},
 {&#39;task_id&#39;: &#39;044238f6-277b-4c1d-824c-65529e27ae04&#39;,
  &#39;task&#39;: &#39;dtq.tasks.sleep&#39;,
  &#39;args&#39;: [],
  &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1},
  &#39;worker&#39;: &#39;celery@bdfaad682753&#39;,
  &#39;time_start&#39;: &#39;2024-02-22T20:58:43.839229Z&#39;,
  &#39;acknowledged&#39;: False,
  &#39;priority&#39;: 0,
  &#39;redelivered&#39;: False,
  &#39;worker_pid&#39;: 8},
 {&#39;task_id&#39;: &#39;6cb3d744-6b32-4bf6-94b7-9dd7d6975a33&#39;,
  &#39;task&#39;: &#39;dtq.tasks.sleep&#39;,
  &#39;args&#39;: [],
  &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1},
  &#39;worker&#39;: &#39;celery@364128f8e977&#39;,
  &#39;time_start&#39;: &#39;2024-02-22T20:58:43.818486Z&#39;,
  &#39;acknowledged&#39;: False,
  &#39;priority&#39;: 0,
  &#39;redelivered&#39;: False,
  &#39;worker_pid&#39;: 10},
 {&#39;task_id&#39;: &#39;7fe15dbe-ac70-4382-a89d-b61d2887e30a&#39;,
  &#39;task&#39;: &#39;dtq.tasks.sleep&#39;,
  &#39;args&#39;: [],
  &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1},
  &#39;worker&#39;: &#39;celery@364128f8e977&#39;,
  &#39;time_start&#39;: &#39;2024-02-22T20:58:43.850899Z&#39;,
  &#39;acknowledged&#39;: False,
  &#39;priority&#39;: 0,
  &#39;redelivered&#39;: False,
  &#39;worker_pid&#39;: 8}]
</pre></div>
</div>
</div>
</details>
</div>
<p>Expecting a list of length two:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pending</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/pending&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">pending</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;task_id&#39;: &#39;a5c75cc8-0113-44cc-979a-146fb9b66c45&#39;,
  &#39;task&#39;: &#39;dtq.tasks.sleep&#39;,
  &#39;retries&#39;: 0,
  &#39;timelimit&#39;: [None, None],
  &#39;root_id&#39;: &#39;a5c75cc8-0113-44cc-979a-146fb9b66c45&#39;,
  &#39;parent_id&#39;: None,
  &#39;origin&#39;: &#39;gen1@0a8d0d78cf08&#39;,
  &#39;args&#39;: [],
  &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1}},
 {&#39;task_id&#39;: &#39;a0cf96cd-61cf-4915-96e2-48d60d5f91a7&#39;,
  &#39;task&#39;: &#39;dtq.tasks.sleep&#39;,
  &#39;retries&#39;: 0,
  &#39;timelimit&#39;: [None, None],
  &#39;root_id&#39;: &#39;a0cf96cd-61cf-4915-96e2-48d60d5f91a7&#39;,
  &#39;parent_id&#39;: None,
  &#39;origin&#39;: &#39;gen1@0a8d0d78cf08&#39;,
  &#39;args&#39;: [],
  &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1}}]
</pre></div>
</div>
</div>
</details>
</div>
<br></section>
<section id="total-pending-tasks">
<h3>Total pending tasks<a class="headerlink" href="#total-pending-tasks" title="Link to this heading">#</a></h3>
<p>For our scalable architecture, we imagine horizontally scaling the workers in and out depending on the size of the pending tasks which we abstract using the <code class="docutils literal notranslate"><span class="pre">wait</span></code> variable. Size of pending tasks depend on how fast the workers are able to process the tasks and the rate and size of incoming tasks. We define the following function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_total_pending_size</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="s2">&quot;celery&quot;</span><span class="p">):</span>
    <span class="n">pending_size</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/pending?queue=</span><span class="si">{</span><span class="n">queue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;task&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;dtq.tasks.sleep&quot;</span><span class="p">:</span>
            <span class="n">pending_size</span> <span class="o">+=</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;kwargs&quot;</span><span class="p">][</span><span class="s2">&quot;wait&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">pending_size</span>
</pre></div>
</div>
</div>
</div>
<p>Below we monitor the pending size while we simulate <code class="docutils literal notranslate"><span class="pre">sleep</span></code> tasks using <a class="reference external" href="https://realpython.com/intro-to-python-threading/">threading</a>:</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">ps</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">ts</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">tasksim</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="mf">4.0</span>
        <span class="n">ts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/sleep?wait=</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&amp;return_value=1&amp;priority=0&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">monitor</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
            <span class="n">ps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_total_pending_size</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">break</span>


<span class="n">thread_monitor</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">monitor</span><span class="p">)</span>
<span class="n">thread_tasksim</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">tasksim</span><span class="p">)</span>

<span class="n">thread_monitor</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread_tasksim</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">thread_monitor</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">thread_tasksim</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Plotting:</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib_inline</span> <span class="kn">import</span> <span class="n">backend_inline</span>
<span class="n">backend_inline</span><span class="o">.</span><span class="n">set_matplotlib_formats</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ps</span><span class="p">))</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">ps</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Total task size (pending)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../../_images/6e72a65156acc0676a82c00b7f98213015d597fca1d92542444560b7708903e8.svg" src="../../_images/6e72a65156acc0676a82c00b7f98213015d597fca1d92542444560b7708903e8.svg" /></div>
</div>
<br>
<figure class="align-default" id="celery-rabbit-mq-monitor">
<img alt="../../_images/04-celery-rabbit-mq-monitor.png" src="../../_images/04-celery-rabbit-mq-monitor.png" />
<figcaption>
<p><span class="caption-number">Fig. 97 </span><span class="caption-text">Monitoring the RabbitMQ broker in <code class="docutils literal notranslate"><span class="pre">localhost:15672</span></code>. The dashboard also shows ready, unacked, and total message counts, as well as message rates. <a class="reference external" href="https://www.datadoghq.com/blog/rabbitmq-monitoring/">Resource usage metrics</a> can be important when load testing.</span><a class="headerlink" href="#celery-rabbit-mq-monitor" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="task-abort-and-revoke">
<h3>Task abort and revoke<a class="headerlink" href="#task-abort-and-revoke" title="Link to this heading">#</a></h3>
<p>Remote commands do not work without workers. So we have to check if workers exist:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/utils.py (continued)</span>
<span class="o">...</span>

<span class="k">def</span> <span class="nf">exist_workers</span><span class="p">():</span>
    <span class="n">inspector</span> <span class="o">=</span> <span class="n">celery_app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">inspector</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

<span class="o">...</span>
</pre></div>
</div>
<p>The following endpoints use the Celery API which allow for proper handling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./api/tasks.py (continued)</span>
<span class="o">...</span>

<span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/revoke/</span><span class="si">{task_id}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">revoke_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JSONResponse</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exist_workers</span><span class="p">():</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2"> revoke failed. No workers found.&quot;</span>
        <span class="n">status_code</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">celery_app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">revoke</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2"> revoked.&quot;</span>
        <span class="n">status_code</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span>

    <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">},</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status_code</span><span class="p">)</span>


<span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/abort/</span><span class="si">{task_id}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">abort_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JSONResponse</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exist_workers</span><span class="p">():</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2"> abort failed. No workers found.&quot;</span>
        <span class="n">status_code</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">celery_app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">revoke</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">terminate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2"> aborted.&quot;</span>
        <span class="n">status_code</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span>

    <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">},</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status_code</span><span class="p">)</span>
</pre></div>
</div>
<section id="revoke-pending-test">
<h4>Revoke pending test<a class="headerlink" href="#revoke-pending-test" title="Link to this heading">#</a></h4>
<p>Running 6 tasks (4 active tasks and 2 pending):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">task_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/sleep?wait=3&amp;return_value=1&amp;priority=0&quot;</span><span class="p">)</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span>
    <span class="n">task_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>


<span class="n">pending</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/pending&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">revoke_task_id</span> <span class="o">=</span> <span class="n">pending</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span>
<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/revoke/</span><span class="si">{</span><span class="n">revoke_task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;message&#39;: &#39;Task 2bfe74da-0c1b-49bb-88e2-930ca7d0e9db revoked.&#39;}
</pre></div>
</div>
</div>
</div>
<p>Getting results of tasks:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">task_ids</span><span class="p">:</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">AsyncResult</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span><span class="o">.</span><span class="n">ready</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">tid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tid</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1aca6463-f7e3-4df6-ba90-70c875180580: SUCCESS 1
4ac38d1b-964b-43ca-ace5-cf8106e8ccb6: SUCCESS 1
9c3ae1fa-ef7b-4013-a020-76e16262eb82: SUCCESS 1
d390b1c5-90f6-4688-8b25-b3a880cd908d: SUCCESS 1
627b7faa-2cd2-41b6-9c3b-110b6d161cfe: SUCCESS 1
2bfe74da-0c1b-49bb-88e2-930ca7d0e9db: REVOKED revoked
</pre></div>
</div>
</div>
</div>
<p>Revoked task from pending list did not succeed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">revoke_task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;2bfe74da-0c1b-49bb-88e2-930ca7d0e9db&#39;,
 &#39;status&#39;: &#39;REVOKED&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;revoked&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1},
 &#39;date_done&#39;: &#39;2024-02-22T20:59:43.703656&#39;}
</pre></div>
</div>
</div>
</div>
</section>
<section id="abort-active-test">
<h4>Abort active test<a class="headerlink" href="#abort-active-test" title="Link to this heading">#</a></h4>
<p>Running 4 tasks (4 active, 0 pending):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">task_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/sleep?wait=3&amp;return_value=1&amp;priority=0&quot;</span><span class="p">)</span>
    <span class="n">task_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;task_id&quot;</span><span class="p">]</span>
    <span class="n">task_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>

<span class="n">active</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/active&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">abort_task_id</span> <span class="o">=</span> <span class="n">active</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;task_id&#39;</span><span class="p">]</span>
<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/tasks/abort/</span><span class="si">{</span><span class="n">abort_task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;message&#39;: &#39;Task 58d2f6b7-8802-4b09-8c0b-7075d6e415ae aborted.&#39;}
</pre></div>
</div>
</div>
</div>
<p>Wait for tasks to finish and getting results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">task_ids</span><span class="p">:</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">AsyncResult</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span><span class="o">.</span><span class="n">ready</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">tid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tid</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2a1044a1-259d-4af0-8f49-520373da50f6: SUCCESS 1
eaabf3e8-47be-4702-a78e-5fc4358b51d5: SUCCESS 1
58d2f6b7-8802-4b09-8c0b-7075d6e415ae: REVOKED terminated
796f88ed-f77e-44e0-a881-90b08e428c32: SUCCESS 1
</pre></div>
</div>
</div>
</div>
<p>Cool. Celery assigns task result as terminated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">abort_task_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;58d2f6b7-8802-4b09-8c0b-7075d6e415ae&#39;,
 &#39;status&#39;: &#39;REVOKED&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;terminated&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 3.0, &#39;return_value&#39;: 1},
 &#39;date_done&#39;: &#39;2024-02-22T20:59:49.102432&#39;}
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="appendix-further-celery">
<h2>Appendix: Further Celery<a class="headerlink" href="#appendix-further-celery" title="Link to this heading">#</a></h2>
<p><strong>Source:</strong> <a class="github reference external" href="https://github.com/particle1331/distributed-task-queue/tree/further-celery">particle1331/distributed-task-queue</a> (⚠ <code class="docutils literal notranslate"><span class="pre">further-celery</span></code> branch)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>rm<span class="w"> </span>-rf<span class="w"> </span>./distributed-task-queue
<span class="o">!</span>git<span class="w"> </span>clone<span class="w"> </span>--single-branch<span class="w"> </span>--branch<span class="w"> </span>further-celery<span class="w"> </span>https://github.com/particle1331/distributed-task-queue.git<span class="w"> </span>./distributed-task-queue<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>git+https://github.com/particle1331/distributed-task-queue.git@further-celery<span class="w"> </span>--force-reinstall<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="o">!</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\nSuccessfully installed: </span><span class="k">$(</span>pip<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>distributed-task-queue<span class="k">)</span><span class="s2">/</span><span class="k">$(</span>wget<span class="w"> </span>--header<span class="o">=</span><span class="s1">&#39;Accept: application/vnd.github.VERSION.sha&#39;</span><span class="w"> </span>-qO-<span class="w"> </span>commit_id<span class="w">  </span>http://api.github.com/repos/particle1331/distributed-task-queue/commits/further-celery<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-c<span class="w"> </span><span class="m">7</span><span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cloning into &#39;./distributed-task-queue&#39;...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Enumerating objects: 289, done.
remote: Counting objects: 100% (106/106), done.
remote: Compressing objects: 100% (48/48), done.
remote: Total 289 (delta 82), reused 59 (delta 58), pack-reused 183
Receiving objects: 100% (289/289), 1.06 MiB | 1.97 MiB/s, done.
Resolving deltas: 100% (167/167), done.
  Running command git clone --filter=blob:none --quiet https://github.com/particle1331/distributed-task-queue.git /private/var/folders/jq/9vsvd9252_349lsng_5gc_jw0000gn/T/pip-req-build-0l0gj037
  Running command git checkout -b further-celery --track origin/further-celery
  Switched to a new branch &#39;further-celery&#39;
  branch &#39;further-celery&#39; set up to track &#39;origin/further-celery&#39;.

Successfully installed: distributed-task-queue        0.0.0/b5aad0c
</pre></div>
</div>
</div>
</div>
<p>Rebuilding stack:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>./distributed-task-queue/docker-compose.yml<span class="w"> </span>down
<span class="o">!</span>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>./distributed-task-queue/docker-compose.yml<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>--build
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>?25l[+] Running 0/0
 ⠋ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.0s </span>
?25h?25l[+] Running 0/4
 ⠙ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.1s </span>
 ⠙ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.1s </span>
 ⠙ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.1s </span>
 ⠙ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l[+] Running 0/4
 ⠹ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.2s </span>
 ⠹ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.2s </span>
 ⠹ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.2s </span>
 ⠹ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.2s </span>
?25h?25l[+] Running 0/4
 ⠸ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.3s </span>
?25h?25l[+] Running 0/4
 ⠼ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.4s </span>
 ⠼ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.4s </span>
 ⠼ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.4s </span>
 ⠼ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.4s </span>
?25h?25l[+] Running 0/4
 ⠴ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.5s </span>
?25h?25l[+] Running 0/4
 ⠦ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.6s </span>
 ⠦ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.6s </span>
 ⠦ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.6s </span>
 ⠦ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.6s </span>
?25h?25l[+] Running 0/4
 ⠧ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.7s </span>
 ⠧ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.7s </span>
 ⠧ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.7s </span>
 ⠧ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.7s </span>
?25h?25l[+] Running 0/4
 ⠇ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.8s </span>
 ⠇ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.8s </span>
 ⠇ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.8s </span>
 ⠇ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.8s </span>
?25h?25l[+] Running 0/4
 ⠏ Container distributed-task-queue-flower-1  Stopping                     <span class=" -Color -Color-Blue">0.9s </span>
 ⠏ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">0.9s </span>
 ⠏ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">0.9s </span>
 ⠏ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">0.9s </span>
?25h?25l[+] Running 1/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Stopped</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 ⠋ Container distributed-task-queue-api-1     Stopping                     <span class=" -Color -Color-Blue">1.0s </span>
 ⠋ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.0s </span>
 ⠋ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.0s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠙ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.1s </span>
 ⠙ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.1s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠹ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.2s </span>
 ⠹ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.2s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠸ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.3s </span>
 ⠸ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.3s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠼ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.4s </span>
 ⠼ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.4s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠴ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.5s </span>
 ⠴ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.5s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠦ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.6s </span>
 ⠦ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.6s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠧ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.7s </span>
 ⠧ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.7s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠇ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.8s </span>
 ⠇ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.8s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠏ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">1.9s </span>
 ⠏ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">1.9s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠋ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.0s </span>
 ⠋ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.0s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠙ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.1s </span>
 ⠙ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.1s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠹ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.2s </span>
 ⠹ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.2s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠸ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.3s </span>
 ⠸ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.3s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠼ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.4s </span>
 ⠼ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.4s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠴ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.5s </span>
 ⠴ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.5s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠦ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.6s </span>
 ⠦ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.6s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠧ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.7s </span>
 ⠧ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.7s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠇ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.8s </span>
 ⠇ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.8s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠏ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">2.9s </span>
 ⠏ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">2.9s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠋ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.0s </span>
 ⠋ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.0s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠙ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.1s </span>
 ⠙ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.1s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠹ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.2s </span>
 ⠹ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.2s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠸ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.3s </span>
 ⠸ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.3s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠼ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.4s </span>
 ⠼ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.4s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠴ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.5s </span>
 ⠴ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.5s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠦ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.6s </span>
 ⠦ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.6s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠧ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.7s </span>
 ⠧ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.7s </span>
?25h?25l[+] Running 2/4
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1  <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1     <span class=" -Color -Color-Green">Removed</span>                      <span class=" -Color -Color-Blue">1.1s </span>
 ⠇ Container distributed-task-queue-worker-1  Stopping                     <span class=" -Color -Color-Blue">3.8s </span>
 ⠇ Container distributed-task-queue-worker-2  Stopping                     <span class=" -Color -Color-Blue">3.8s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 4/4</span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 ⠋ Container distributed-task-queue-redis-1     Stopping                   <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.0s </span>
?25h?25l[+] Running 4/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 ⠙ Container distributed-task-queue-redis-1     Stopping                   <span class=" -Color -Color-Blue">0.1s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l[+] Running 4/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 ⠹ Container distributed-task-queue-redis-1     Stopping                   <span class=" -Color -Color-Blue">0.2s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.2s </span>
?25h?25l[+] Running 4/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 ⠸ Container distributed-task-queue-redis-1     Stopping                   <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.3s </span>
?25h?25l[+] Running 4/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 ⠼ Container distributed-task-queue-redis-1     Stopping                   <span class=" -Color -Color-Blue">0.4s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Stopped</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.6s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.7s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.8s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">0.9s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.0s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.1s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.2s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.3s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.6s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.7s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.8s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">1.9s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.0s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.1s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.2s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.3s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.6s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.7s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.8s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">2.9s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.0s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.1s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.2s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.3s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.6s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.7s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.8s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">3.9s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.0s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.1s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.2s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.3s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.6s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.7s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.8s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">4.9s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.0s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.1s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.2s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.3s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.6s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.7s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.8s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">5.9s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.0s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.1s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.2s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.3s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.4s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.5s </span>
?25h?25l[+] Running 5/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1  Stopping                   <span class=" -Color -Color-Blue">6.6s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 6/6</span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">6.7s </span>
?25h?25l[+] Running 7/6
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2    <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">3.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1     <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1  <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">6.7s </span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default       <span class=" -Color -Color-Green">Removed</span>                    <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l[+] Building 0.0s (0/0)                                    docker:desktop-linux
?25h?25l[+] Building 0.0s (4/5)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [worker internal] load metadata for docker.io/library/python:3.9.15-s  0.0s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
?25h?25l[+] Building 0.2s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  0.2s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 0.3s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  0.3s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 0.5s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  0.5s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 0.6s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  0.6s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 0.8s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  0.8s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 0.9s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  0.9s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 1.1s (6/7)                                    docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
 =&gt; [other-worker internal] load metadata for docker.io/library/python:3.  1.1s
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
?25h?25l[+] Building 1.2s (26/31)                                  docker:desktop-linux
<span class=" -Color -Color-Blue"> =&gt; [api internal] load .dockerignore                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build definition from Dockerfile.api               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 340B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load metadata for docker.io/library/python:3.9.15-slim  1.1s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load .dockerignore                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build definition from Dockerfile.worker         0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build definition from Dockerfile.worker   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring dockerfile: 271B                                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load .dockerignore                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 2B                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker 1/7] FROM docker.io/library/python:3.9.15-slim@sha256:f  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker internal] load build context                                   0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 3.10kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api internal] load build context                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 8.97kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker internal] load build context                             0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; transferring context: 3.10kB                                        0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 2/7] WORKDIR /opt                                          0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 3/7] COPY ./dtq/requirements.txt .                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 4/7] RUN pip install -r requirements.txt                0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 5/7] RUN pip install setproctitle                       0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 6/7] RUN apt-get update &amp;&amp; apt-get install -y procps    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [worker 7/7] COPY /dtq/ ./dtq/                                  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [other-worker] exporting to image                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:904fbc852c456db67b1bed754759b15b2507336d29803  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-other-worker     0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [worker] exporting to image                                            0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:ce1e8b2b2e09908b24c96f9d21fc3bc1a7660366bb364  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-worker           0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 3/8] COPY ./dtq/requirements.txt dtq-requirements.txt      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 4/8] COPY ./api/requirements.txt api-requirements.txt      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 5/8] RUN pip install -r dtq-requirements.txt               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 6/8] RUN pip install -r api-requirements.txt               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 7/8] COPY ./dtq ./dtq                                      0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; CACHED [api 8/8] COPY ./api .                                          0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; [api] exporting to image                                               0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; exporting layers                                                    0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; writing image sha256:8a0de09964cfbd59bd03ff1154eed5f68bec0ad24deed  0.0s</span>
<span class=" -Color -Color-Blue"> =&gt; =&gt; naming to docker.io/library/distributed-task-queue-api              0.0s</span>
?25h?25l[+] Running 0/0
 ⠋ Network distributed-task-queue_default  Creating                        <span class=" -Color -Color-Blue">0.0s </span>
?25h?25l[+] Running 3/1
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-api-1           Creating               <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-worker-2        Creating               <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-other-worker-1  Creating               <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-worker-1        Creating               <span class=" -Color -Color-Blue">0.0s </span>
 ⠋ Container distributed-task-queue-flower-1        Creating               <span class=" -Color -Color-Blue">0.0s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Created</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Started</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>./distributed-task-queue/docker-compose.yml<span class="w"> </span>ps
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NAME                                    IMAGE                                 COMMAND                  SERVICE        CREATED         STATUS                  PORTS
distributed-task-queue-api-1            distributed-task-queue-api            &quot;uvicorn main:app --…&quot;   api            3 seconds ago   Up Less than a second   0.0.0.0:8000-&gt;8000/tcp
distributed-task-queue-flower-1         mher/flower                           &quot;celery --broker=amq…&quot;   flower         3 seconds ago   Up Less than a second   0.0.0.0:5555-&gt;5555/tcp
distributed-task-queue-other-worker-1   distributed-task-queue-other-worker   &quot;celery -A dtq.app w…&quot;   other-worker   3 seconds ago   Up 1 second             
distributed-task-queue-rabbitmq-1       rabbitmq:3.12.0-management            &quot;docker-entrypoint.s…&quot;   rabbitmq       3 seconds ago   Up 1 second             4369/tcp, 5671/tcp, 0.0.0.0:5672-&gt;5672/tcp, 15671/tcp, 15691-15692/tcp, 25672/tcp, 0.0.0.0:15672-&gt;15672/tcp
distributed-task-queue-redis-1          redis:latest                          &quot;docker-entrypoint.s…&quot;   redis          3 seconds ago   Up 1 second             0.0.0.0:6379-&gt;6379/tcp
distributed-task-queue-worker-1         distributed-task-queue-worker         &quot;celery -A dtq.app w…&quot;   worker         3 seconds ago   Up 1 second             
distributed-task-queue-worker-2         distributed-task-queue-worker         &quot;celery -A dtq.app w…&quot;   worker         3 seconds ago   Up Less than a second   
</pre></div>
</div>
</div>
</div>
<section id="more-options">
<h3>More options<a class="headerlink" href="#more-options" title="Link to this heading">#</a></h3>
<p>Some interesting Celery features we can look into for our application is to add <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/tasks.html#retrying">retries</a>. Having <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/workers.html#time-limits">time limits</a> can prevent tasks from blocking workers. For example, a task that is running 3 hours when the average task runs for about 3 minutes. This task can be cleaned up and logged so that further investigation can be done.</p>
<p>Reworking our previous task definition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dtq.tasks</span> <span class="kn">import</span> <span class="n">random_fail</span>

random_fail<span class="o">??</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Red">Signature:</span>       random_fail<span class=" -Color -Color-Blue">(</span>prob<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">0.5</span><span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Call signature:</span>  random_fail<span class=" -Color -Color-Blue">(*</span>a<span class=" -Color -Color-Blue">,</span> <span class=" -Color -Color-Blue">**</span>kw<span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Type:</span>            PromiseProxy
<span class=" -Color -Color-Red">String form:</span>     &lt;@task: dtq.tasks.random_fail of distributed-task-queue at 0x1057bc490&gt;
<span class=" -Color -Color-Red">File:</span>            ~/opt/miniconda3/envs/tasks/lib/python3.9/site-packages/dtq/tasks.py
<span class=" -Color -Color-Red">Source:</span>         
<span class=" -Color -Color-Blue">@</span>app<span class=" -Color -Color-Blue">.</span>task<span class=" -Color -Color-Blue">(</span>
    autoretry_for<span class=" -Color -Color-Blue">=(</span>ZeroDivisionError<span class=" -Color -Color-Blue">,),</span>
    max_retries<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">2</span><span class=" -Color -Color-Blue">,</span>
    retry_backoff<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">3</span><span class=" -Color -Color-Blue">,</span>
    retry_jitter<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Green">True</span><span class=" -Color -Color-Blue">,</span>
<span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Green">def</span> random_fail<span class=" -Color -Color-Blue">(</span>prob<span class=" -Color -Color-Blue">=</span><span class=" -Color -Color-Cyan">0.5</span><span class=" -Color -Color-Blue">):</span>
    time<span class=" -Color -Color-Blue">.</span>sleep<span class=" -Color -Color-Blue">(</span><span class=" -Color -Color-Cyan">0.1</span><span class=" -Color -Color-Blue">)</span>
    x <span class=" -Color -Color-Blue">=</span> random<span class=" -Color -Color-Blue">.</span>random<span class=" -Color -Color-Blue">()</span>
    <span class=" -Color -Color-Green">return</span> <span class=" -Color -Color-Cyan">1</span> <span class=" -Color -Color-Blue">/</span> int<span class=" -Color -Color-Blue">(</span>x <span class=" -Color -Color-Blue">&gt;</span> prob<span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Class docstring:</span>
Task base class.

Note:
    When called tasks apply the :meth:`run` method.  This method must
    be defined by all tasks (that is unless the :meth:`__call__` method
    is overridden).
</pre></div>
</div>
</div>
</div>
<p>This retries twice during a <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> with the first retry occuring between 0 and 3 seconds, and the next between 0 and 6 seconds. Testing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">random_fail</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;prob&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">})</span>
<span class="n">result</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AsyncResult: f2013e77-f82c-49f0-9d07-a0f6c649b991&gt;
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="celery-retries">
<img alt="../../_images/04-celery-retries.png" src="../../_images/04-celery-retries.png" />
<figcaption>
<p><span class="caption-number">Fig. 98 </span><span class="caption-text">Task retries. Note that child tasks from retries have the same task ID.</span><a class="headerlink" href="#celery-retries" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Setting client-side time limits (in seconds). Note that these can be set at definition in the task decorators in case we have identified a suitable upper bound for the execution time for the task for all workers. The soft time limit raises <code class="docutils literal notranslate"><span class="pre">SoftTimeLimitExceeded</span></code> which allows handling or cleanup, before the hard time limit kills the process with SIGKILL.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dtq.tasks</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> 
    <span class="n">time_limit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">soft_time_limit</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">():</span>
    <span class="k">continue</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;45823544-da5c-4955-b331-272d968893a4&#39;,
 &#39;status&#39;: &#39;FAILURE&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;SoftTimeLimitExceeded()&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 3},
 &#39;date_done&#39;: &#39;2024-02-22T21:00:48.620936&#39;}
</pre></div>
</div>
</div>
</div>
<p>Hard time limit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">time_limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">():</span>
    <span class="k">continue</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">API_URL</span><span class="si">}</span><span class="s2">/results/</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;ce748246-66ca-4821-b876-9f04ef1b6f04&#39;,
 &#39;status&#39;: &#39;FAILURE&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;TimeLimitExceeded(1,)&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 3},
 &#39;date_done&#39;: &#39;2024-02-22T21:00:49.751109&#39;}
</pre></div>
</div>
</div>
</div>
</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Link to this heading">#</a></h3>
<p>Celery automatically sets up <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/tasks.html#logging">logging</a>. The compose file has been modified to write logs to a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">celery</span> <span class="o">-</span><span class="n">A</span> <span class="n">dtq</span><span class="o">.</span><span class="n">app</span> <span class="n">worker</span> <span class="o">-</span><span class="n">l</span> <span class="n">INFO</span> <span class="o">-</span><span class="n">f</span> <span class="n">celery</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>Checking logs for above task that exited with soft time limit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-1<span class="w"> </span>tail<span class="w"> </span>-14<span class="w"> </span>/opt/celery.log
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2024-02-22 21:00:47,608: INFO/MainProcess] Task dtq.tasks.sleep[45823544-da5c-4955-b331-272d968893a4] received
[2024-02-22 21:00:48,616: WARNING/MainProcess] Soft time limit (1s) exceeded for dtq.tasks.sleep[45823544-da5c-4955-b331-272d968893a4]
[2024-02-22 21:00:48,624: ERROR/ForkPoolWorker-1] [task_failure_notifier]: Task dtq.tasks.sleep failed successfully!
[2024-02-22 21:00:48,625: ERROR/ForkPoolWorker-1] Task dtq.tasks.sleep[45823544-da5c-4955-b331-272d968893a4] raised unexpected: SoftTimeLimitExceeded()
Traceback (most recent call last):
  File &quot;/usr/local/lib/python3.9/site-packages/celery/app/trace.py&quot;, line 477, in trace_task
    R = retval = fun(*args, **kwargs)
  File &quot;/usr/local/lib/python3.9/site-packages/celery/app/trace.py&quot;, line 760, in __protected_call__
    return self.run(*args, **kwargs)
  File &quot;/opt/dtq/tasks.py&quot;, line 9, in sleep
    time.sleep(wait)
  File &quot;/usr/local/lib/python3.9/site-packages/billiard/pool.py&quot;, line 228, in soft_timeout_sighandler
    raise SoftTimeLimitExceeded()
billiard.exceptions.SoftTimeLimitExceeded: SoftTimeLimitExceeded()
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-2<span class="w"> </span>tail<span class="w"> </span>-14<span class="w"> </span>/opt/celery.log
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2024-02-22 21:00:49,750: ERROR/MainProcess] [task_failure_notifier]: Task dtq.tasks.sleep failed successfully!
[2024-02-22 21:00:49,750: ERROR/MainProcess] Task handler raised error: TimeLimitExceeded(1)
Traceback (most recent call last):
  File &quot;/usr/local/lib/python3.9/site-packages/billiard/pool.py&quot;, line 683, in on_hard_timeout
    raise TimeLimitExceeded(job._timeout)
billiard.einfo.ExceptionWithTraceback: 
&quot;&quot;&quot;
Traceback (most recent call last):
  File &quot;/usr/local/lib/python3.9/site-packages/billiard/pool.py&quot;, line 683, in on_hard_timeout
    raise TimeLimitExceeded(job._timeout)
billiard.exceptions.TimeLimitExceeded: TimeLimitExceeded(1,)
&quot;&quot;&quot;
[2024-02-22 21:00:49,751: ERROR/MainProcess] Hard time limit (1s) exceeded for dtq.tasks.sleep[ce748246-66ca-4821-b876-9f04ef1b6f04]
[2024-02-22 21:00:49,869: ERROR/MainProcess] Process &#39;ForkPoolWorker-1&#39; pid:7 exited with &#39;signal 9 (SIGKILL)&#39;
</pre></div>
</div>
</div>
</div>
<p>Note worker process which triggered <code class="docutils literal notranslate"><span class="pre">SoftTimeLimitExceeded</span></code> is still alive. This is not true for worker process which triggered <code class="docutils literal notranslate"><span class="pre">TimeLimitExceeded</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-1<span class="w"> </span>ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>celeryd
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>root         1  4.0  0.9  46248 38424 ?        Ss   21:00   0:01 [celeryd: celery@8f52c2c55c86:MainProcess] -active- (-A dtq.app worker --concurrency 2 -Q celery -l INFO -f celery.log)
root         8  0.5  0.8  45972 35340 ?        S    21:00   0:00 [celeryd: celery@8f52c2c55c86:ForkPoolWorker-1]
root         9  0.0  0.8  43484 33168 ?        S    21:00   0:00 [celeryd: celery@8f52c2c55c86:ForkPoolWorker-2]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-2<span class="w"> </span>ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>celeryd
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>root         1  4.0  0.9  46504 38576 ?        Ss   21:00   0:01 [celeryd: celery@4d44321eb801:MainProcess] -active- (-A dtq.app worker --concurrency 2 -Q celery -l INFO -f celery.log)
root         8  0.2  0.8  45976 35216 ?        S    21:00   0:00 [celeryd: celery@4d44321eb801:ForkPoolWorker-2]
root         9  0.0  0.8  46508 35064 ?        S    21:00   0:00 [celeryd: celery@4d44321eb801:ForkPoolWorker-3]
</pre></div>
</div>
</div>
</div>
</section>
<section id="workflows">
<h3>Workflows<a class="headerlink" href="#workflows" title="Link to this heading">#</a></h3>
<p>Task <strong>workflows</strong> also seems to be very interesting and feature rich. Recall that tasks execute asynchronously. To execute tasks in sequence (i.e. executing a child task once a parent task completes) we can use <strong>chains</strong> which can be implemented by using the pipe operator <code class="docutils literal notranslate"><span class="pre">|</span></code> on individual tasks:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dtq.tasks</span> <span class="kn">import</span> <span class="n">random_fail</span><span class="p">,</span> <span class="n">sleep</span>

<span class="n">chain</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">random_fail</span><span class="o">.</span><span class="n">si</span><span class="p">(</span><span class="n">prob</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="o">|</span> <span class="n">sleep</span><span class="o">.</span><span class="n">si</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">|</span> <span class="n">sleep</span><span class="o">.</span><span class="n">si</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">():</span>
    <span class="k">continue</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dbcd58f6-6a6a-42c1-ace5-a5d59db6dc3d
d0848984-35c7-4775-9fd7-cb41358851db
1eed767d-d588-4f99-ae76-d8be7fcafcd8
division by zero
</pre></div>
</div>
</div>
</div>
<p>Failure cascades to the succeeding tasks:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;http://localhost:8000/results/</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;dbcd58f6-6a6a-42c1-ace5-a5d59db6dc3d&#39;,
 &#39;status&#39;: &#39;FAILURE&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;division by zero&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;prob&#39;: 1.0},
 &#39;date_done&#39;: &#39;2024-02-22T21:00:56.204850&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;http://localhost:8000/results/</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;d0848984-35c7-4775-9fd7-cb41358851db&#39;,
 &#39;status&#39;: &#39;FAILURE&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;division by zero&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 3, &#39;return_value&#39;: 0},
 &#39;date_done&#39;: &#39;2024-02-22T21:00:56.208908&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;http://localhost:8000/results/</span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;task_id&#39;: &#39;1eed767d-d588-4f99-ae76-d8be7fcafcd8&#39;,
 &#39;status&#39;: &#39;FAILURE&#39;,
 &#39;successful&#39;: False,
 &#39;result&#39;: &#39;division by zero&#39;,
 &#39;args&#39;: [],
 &#39;kwargs&#39;: {&#39;wait&#39;: 3, &#39;return_value&#39;: 1},
 &#39;date_done&#39;: &#39;2024-02-22T21:00:56.208134&#39;}
</pre></div>
</div>
</div>
</div>
<p>Features for <strong>parallel</strong> task execution and <strong>joining</strong> parallel task results also exist. <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/canvas.html#callbacks">Error callbacks</a> for chains is particularly interesting as it helps separating task logic from error handling code (e.g. logging error trace). See the <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/canvas.html">docs</a>.</p>
<figure class="align-default" id="celery-wfgraph">
<img alt="../../_images/04-celery-wfgraph.png" src="../../_images/04-celery-wfgraph.png" />
<figcaption>
<p><span class="caption-number">Fig. 99 </span><span class="caption-text">A complex graph structure built from chains and groups (23 tasks in total). <a class="reference external" href="https://blog.ovhcloud.com/doing-big-automation-with-celery/">Source</a></span><a class="headerlink" href="#celery-wfgraph" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="signals">
<h3>Signals<a class="headerlink" href="#signals" title="Link to this heading">#</a></h3>
<p>Several kinds of events trigger <strong>signals</strong>, you can connect to these signals to perform actions as they trigger. Here we define a <code class="docutils literal notranslate"><span class="pre">worker_init</span></code> signal that is dispatched <strong>before</strong> the worker is started, and a <code class="docutils literal notranslate"><span class="pre">task-failure</span></code> signal dispatched when a task fails.  A logger has to be set up since the celery logger does not exist yet at this point.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pygmentize<span class="w"> </span>-g<span class="w"> </span>./distributed-task-queue/dtq/signals.py
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-White"># pylint: disable=unused-argument</span>
<span class=" -Color -Color-Blue">import</span> <span class=" -Color -Color-Cyan">logging</span>
<span class=" -Color -Color-Blue">import</span> <span class=" -Color -Color-Cyan">time</span>

<span class=" -Color -Color-Blue">from</span> <span class=" -Color -Color-Cyan">celery.exceptions</span> <span class=" -Color -Color-Blue">import</span> WorkerShutdown
<span class=" -Color -Color-Blue">from</span> <span class=" -Color -Color-Cyan">celery.signals</span> <span class=" -Color -Color-Blue">import</span> task_failure, worker_init
<span class=" -Color -Color-Blue">from</span> <span class=" -Color -Color-Cyan">celery.utils.log</span> <span class=" -Color -Color-Blue">import</span> get_logger


@worker_init.connect
<span class=" -Color -Color-Blue">def</span> <span class=" -Color -Color-Green">setup_workers</span>(sender=<span class=" -Color -Color-Blue">None</span>, conf=<span class=" -Color -Color-Blue">None</span>, **kwargs):
    logging.basicConfig(
        filename=<span class=" -Color -Color-Yellow">&quot;worker_init.log&quot;</span>,
        filemode=<span class=" -Color -Color-Yellow">&quot;w&quot;</span>,
        <span class=" -Color -Color-Cyan">format</span>=<span class=" -Color -Color-Yellow">&quot;[%(asctime)s: %(levelname)s/%(name)s] %(message)s&quot;</span>,
        level=logging.INFO,
    )
    logger = logging.getLogger(<span class=" -Color -Color-Yellow">&quot;WorkerInit&quot;</span>)

    <span class=" -Color -Color-Blue">try</span>:
        logger.info(<span class=" -Color -Color-Yellow">&quot;Starting worker...&quot;</span>)
        time.sleep(<span class=" -Color -Color-Blue">12.0</span>)
        logger.info(<span class=" -Color -Color-Yellow">&quot;Worker started successfully.&quot;</span>)

    <span class=" -Color -Color-Blue">except</span> <span class=" -Color -Color-Cyan">Exception</span> <span class=" -Color -Color-Blue">as</span> exc:
        logger.error(exc, exc_info=<span class=" -Color -Color-Blue">True</span>)
        logger.critical(<span class=" -Color -Color-Yellow">&quot;Failed to start worker. Shutting down...&quot;</span>)
        <span class=" -Color -Color-Blue">raise</span> WorkerShutdown() <span class=" -Color -Color-Blue">from</span> <span class=" -Color -Color-Cyan">exc</span>


@task_failure.connect
<span class=" -Color -Color-Blue">def</span> <span class=" -Color -Color-Green">task_failure_notifier</span>(sender=<span class=" -Color -Color-Blue">None</span>, task_id=<span class=" -Color -Color-Blue">None</span>, **kwargs):
    logger = get_logger(<span class=" -Color -Color-Yellow">&quot;celery&quot;</span>)
    message = (
        <span class=" -Color -Color-Yellow">f&quot;[task_failure_notifier]: Task {</span>sender.name<span class=" -Color -Color-Yellow">} failed successfully!&quot;</span>
    )
    logger.error(message)
</pre></div>
</div>
</div>
</div>
<p>Defining a <code class="docutils literal notranslate"><span class="pre">worker_init</span></code> signal can be useful when we want to dynamic initialization before the worker picks up tasks. Pinging some external dependency such as a background prediction server can be done here. Or a worker can shut down whenever an exception is encountered during initialization.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-1<span class="w"> </span>cat<span class="w"> </span>worker_init.log
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2024-02-22 21:00:26,091: INFO/WorkerInit] Starting worker...
[2024-02-22 21:00:38,105: INFO/WorkerInit] Worker started successfully.
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">task_failure_notifier</span></code> simply logs a message in the event of a failure.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>distributed-task-queue-worker-1<span class="w"> </span>cat<span class="w"> </span>celery.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>task_failure_notifier
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2024-02-22 21:00:43,255: ERROR/ForkPoolWorker-1] [task_failure_notifier]: Task dtq.tasks.random_fail failed successfully!
[2024-02-22 21:00:48,624: ERROR/ForkPoolWorker-1] [task_failure_notifier]: Task dtq.tasks.sleep failed successfully!
[2024-02-22 21:00:56,209: ERROR/ForkPoolWorker-1] [task_failure_notifier]: Task dtq.tasks.random_fail failed successfully!
</pre></div>
</div>
</div>
</div>
<br>
<figure class="align-default" id="celery-signals">
<img alt="../../_images/04-celery-signals.png" src="../../_images/04-celery-signals.png" />
<figcaption>
<p><span class="caption-number">Fig. 100 </span><span class="caption-text">Notice that worker logging starts after worker initialization. Task failure notifier occurs exactly when a failure occurs.</span><a class="headerlink" href="#celery-signals" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="broker-config">
<span id="mlops-04-tasks-broker-config"></span><h3>Broker config<a class="headerlink" href="#broker-config" title="Link to this heading">#</a></h3>
<p>Here we look at configuring RabbitMQ for our use-case of having long-running tasks. RabbitMQ has a default timeout of 30 mins before a received task is acknowledged. Otherwise, it triggers a <code class="docutils literal notranslate"><span class="pre">PreconditionFailed</span></code> error redelivering the task to another worker. RabbitMQ also closes the channel for this worker, eventually killing all of our workers. We modify this behavior and instead rely on soft and hard time limits to ensure that workers are not hanging.</p>
<figure class="align-default" id="celery-precondition-fail">
<a class="reference internal image-reference" href="../../_images/04-celery-precondition-fail.png"><img alt="../../_images/04-celery-precondition-fail.png" src="../../_images/04-celery-precondition-fail.png" style="width: 90%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 101 </span><span class="caption-text">Sleep task with wait time exceeding 1800s triggers <code class="docutils literal notranslate"><span class="pre">PRECONDITION_FAILED</span></code>. RabbitMQ closes the connection.</span><a class="headerlink" href="#celery-precondition-fail" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>To fix this we created the following file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># rabbitmq/rabbitmq.conf</span>
<span class="n">consumer_timeout</span> <span class="o">=</span> <span class="mi">31622400000</span>
</pre></div>
</div>
<p>This is in milliseconds which is equivalent to roughly 1 year. Then, the compose file is modified as follows. The change should be visible in the Queues/Consumers tab of the RabbitMQ management console.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># docker-compose.yaml (further-celery)</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq:3.12.0-management</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;5672:5672&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;15672:15672&quot;</span>
<span class="w">        </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./rabbitmq/rabbitmq.conf:/etc/rabbitmq/rabbitmq.conf</span>

<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</section>
</section>
<section id="appendix-task-routing">
<h2>Appendix: Task routing<a class="headerlink" href="#appendix-task-routing" title="Link to this heading">#</a></h2>
<p>We can also implement <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/routing.html">task routing</a>. This can be useful, for example, if we want specific machines (e.g. an expensive instance with a GPU) to focus on specific tasks. Note that our implementation of <code class="docutils literal notranslate"><span class="pre">ActiveTask</span></code> model hides routing keys from tasks. The configuration can be modified by defining another queue called <code class="docutils literal notranslate"><span class="pre">other</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./dtq/app.py (further-celery)</span>
<span class="o">...</span>

<span class="n">CELERY_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;task_acks_late&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;worker_prefetch_multiplier&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;task_default_priority&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;task_queue_max_priority&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;task_create_missing_queues&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>     <span class="c1"># (!)</span>
    <span class="s2">&quot;result_expires&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s2">&quot;result_extended&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">CELERY_CONFIG</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>                    <span class="c1"># (!)</span>
    <span class="s2">&quot;dtq.tasks.*&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;celery&quot;</span><span class="p">},</span>
    <span class="s2">&quot;dtq.other_tasks.*&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;other&quot;</span><span class="p">}</span>
<span class="p">}</span>
<span class="o">...</span>
</pre></div>
</div>
<p>This automatically creates queues which can be bad. But this is the simplest way to do this.
Routing tasks based on their module path to certain queues is defined in <code class="docutils literal notranslate"><span class="pre">task_routes</span></code> above.
Then, the specific worker for that queue is started (along with other arguments) using the <code class="docutils literal notranslate"><span class="pre">-Q</span></code> flag.
Here we start a worker on the new queue:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./docker-compose.yml</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">other-worker</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.worker</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rabbitmq</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_HOST=redis</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_PORT=6379</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_HOST=rabbitmq</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RABBITMQ_PORT=5672</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
<span class="w">      </span><span class="s">&quot;-A&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;dtq.app&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;worker&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-n&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;other@%h&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;--concurrency&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-Q&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;other&quot;</span><span class="p p-Indicator">,</span>
<span class="w">      </span><span class="s">&quot;-l&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;celery.log&quot;</span>
<span class="w">    </span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>Our new task:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dtq.other_tasks</span> <span class="kn">import</span> <span class="n">hello</span>

hello<span class="o">??</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Red">Signature:</span>       hello<span class=" -Color -Color-Blue">()</span>
<span class=" -Color -Color-Red">Call signature:</span>  hello<span class=" -Color -Color-Blue">(*</span>a<span class=" -Color -Color-Blue">,</span> <span class=" -Color -Color-Blue">**</span>kw<span class=" -Color -Color-Blue">)</span>
<span class=" -Color -Color-Red">Type:</span>            PromiseProxy
<span class=" -Color -Color-Red">String form:</span>     &lt;@task: dtq.other_tasks.hello of distributed-task-queue at 0x131b33e80&gt;
<span class=" -Color -Color-Red">File:</span>            ~/opt/miniconda3/envs/tasks/lib/python3.9/site-packages/dtq/other_tasks.py
<span class=" -Color -Color-Red">Source:</span>         
<span class=" -Color -Color-Blue">@</span>app<span class=" -Color -Color-Blue">.</span>task
<span class=" -Color -Color-Green">def</span> hello<span class=" -Color -Color-Blue">():</span>
    <span class=" -Color -Color-Green">return</span> <span class=" -Color -Color-Blue">&quot;Hello, from other queue.&quot;</span>
<span class=" -Color -Color-Red">Class docstring:</span>
Task base class.

Note:
    When called tasks apply the :meth:`run` method.  This method must
    be defined by all tasks (that is unless the :meth:`__call__` method
    is overridden).
</pre></div>
</div>
</div>
</div>
<p>Recall that we have 4 workers on the <code class="docutils literal notranslate"><span class="pre">celery</span></code> queue and 1 worker on the <code class="docutils literal notranslate"><span class="pre">other</span></code> queue.
The other tasks are not distributed to the default workers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">hello</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Similarly, when two tasks are pending in the default queue, the other worker does not pick up:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">sleep</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">6.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Overriding task routes.</strong> Configured task routes can be overridden using the <code class="docutils literal notranslate"><span class="pre">queue</span></code> parameter:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># swapping out the queues</span>
<span class="c1"># ⚠⚠⚠ Typo in queue name creates a new queue (without workers)! Fix: global vars</span>
<span class="n">hello</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="s2">&quot;celery&quot;</span><span class="p">)</span>
<span class="n">sleep</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">queue</span><span class="o">=</span><span class="s2">&quot;other&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AsyncResult: e7b9a385-d621-40e9-9a60-b8ad7c72a897&gt;
</pre></div>
</div>
</div>
</details>
</div>
<figure class="align-default" id="celery-queue-other">
<img alt="../../_images/04-celery-queue-other.png" src="../../_images/04-celery-queue-other.png" />
<figcaption>
<p><span class="caption-number">Fig. 102 </span><span class="caption-text">Workers only pick up tasks routed to their configured queues (even when free). This is overridden in the last two tasks where the queues are swapped.</span><a class="headerlink" href="#celery-queue-other" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><strong>Remark.</strong> Multiple queues can be used to A/B test different code or ML model versions. Or do things like <a class="reference external" href="https://cloud.google.com/deploy/docs/deployment-strategies/canary">canary deployment</a>. The task API can be internally modified to dynamically route to certain queues (e.g. based on argument values).</p>
</section>
<section id="appendix-periodic-tasks">
<span id="id1"></span><h2>Appendix: Periodic tasks<a class="headerlink" href="#appendix-periodic-tasks" title="Link to this heading">#</a></h2>
<p>Periodic schedules using <a class="reference external" href="https://docs.celeryq.dev/en/stable/userguide/periodic-tasks.html">celery beat</a> only need to be added in the application code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./dtq/app.py</span>
<span class="kn">from</span> <span class="nn">celery.schedules</span> <span class="kn">import</span> <span class="n">crontab</span>

<span class="o">...</span>

<span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">beat_schedule</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;random-fail-every-10-seconds&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="s2">&quot;dtq.tasks.random_fail&quot;</span><span class="p">,</span>
        <span class="s2">&quot;schedule&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">(),</span>
    <span class="p">},</span>
    <span class="s2">&quot;sleep-every-1-minute&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="s2">&quot;dtq.tasks.sleep&quot;</span><span class="p">,</span>
        <span class="s2">&quot;schedule&quot;</span><span class="p">:</span> <span class="n">crontab</span><span class="p">(),</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Running the schedule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">celery</span> <span class="o">-</span><span class="n">A</span> <span class="n">dtq</span><span class="o">.</span><span class="n">app</span> <span class="n">beat</span>
</pre></div>
</div>
<br>
<figure class="align-default" id="celery-beat">
<img alt="../../_images/04-celery-beat.png" src="../../_images/04-celery-beat.png" />
<figcaption>
<p><span class="caption-number">Fig. 103 </span><span class="caption-text">Tasks scheduled using celery beat.</span><a class="headerlink" href="#celery-beat" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="celery-beat-rabbitmq">
<img alt="../../_images/04-celery-beat-rabbitmq.png" src="../../_images/04-celery-beat-rabbitmq.png" />
<figcaption>
<p><span class="caption-number">Fig. 104 </span><span class="caption-text">Celery beat triggers the task execution without passing through a queue.</span><a class="headerlink" href="#celery-beat-rabbitmq" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>./distributed-task-queue/docker-compose.yml<span class="w"> </span>down
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>?25l[+] Running 0/0
 ⠋ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-flower-1        Stopping               <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-api-1           Stopping               <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l[+] Running 0/5
 ⠙ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.2s </span>
 ⠙ Container distributed-task-queue-flower-1        Stopping               <span class=" -Color -Color-Blue">0.2s </span>
 ⠙ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.2s </span>
 ⠙ Container distributed-task-queue-api-1           Stopping               <span class=" -Color -Color-Blue">0.2s </span>
 ⠙ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.2s </span>
?25h?25l[+] Running 0/5
 ⠹ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-flower-1        Stopping               <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-api-1           Stopping               <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.3s </span>
?25h?25l[+] Running 1/5
 ⠸ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.4s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.4s </span>
 ⠸ Container distributed-task-queue-api-1           Stopping               <span class=" -Color -Color-Blue">0.4s </span>
 ⠸ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.4s </span>
?25h?25l[+] Running 1/5
 ⠼ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-api-1           Stopping               <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.5s </span>
?25h?25l[+] Running 2/5
 ⠴ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.6s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.6s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.6s </span>
?25h?25l[+] Running 2/5
 ⠦ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.7s </span>
?25h?25l[+] Running 2/5
 ⠧ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.8s </span>
?25h?25l[+] Running 2/5
 ⠇ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">0.9s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">0.9s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">0.9s </span>
?25h?25l[+] Running 2/5
 ⠏ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.0s </span>
?25h?25l[+] Running 2/5
 ⠋ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.1s </span>
?25h?25l[+] Running 2/5
 ⠙ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.2s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.2s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.2s </span>
?25h?25l[+] Running 2/5
 ⠹ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.3s </span>
?25h?25l[+] Running 2/5
 ⠸ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.4s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.4s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.4s </span>
?25h?25l[+] Running 2/5
 ⠼ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.5s </span>
?25h?25l[+] Running 2/5
 ⠴ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.6s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.6s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.6s </span>
?25h?25l[+] Running 2/5
 ⠦ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.7s </span>
?25h?25l[+] Running 2/5
 ⠧ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.8s </span>
?25h?25l[+] Running 2/5
 ⠇ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">1.9s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">1.9s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠇ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">1.9s </span>
?25h?25l[+] Running 2/5
 ⠏ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.0s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠏ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.0s </span>
?25h?25l[+] Running 2/5
 ⠋ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.1s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠋ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.1s </span>
?25h?25l[+] Running 2/5
 ⠙ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.2s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.2s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠙ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.2s </span>
?25h?25l[+] Running 2/5
 ⠹ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠹ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.3s </span>
?25h?25l[+] Running 2/5
 ⠸ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.4s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.4s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠸ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.4s </span>
?25h?25l[+] Running 2/5
 ⠼ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠼ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.5s </span>
?25h?25l[+] Running 2/5
 ⠴ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.6s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.6s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠴ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.6s </span>
?25h?25l[+] Running 2/5
 ⠦ Container distributed-task-queue-other-worker-1  Stopping               <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠦ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.7s </span>
?25h?25l[+] Running 3/5
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-worker-1        Stopping               <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 ⠧ Container distributed-task-queue-worker-2        Stopping               <span class=" -Color -Color-Blue">2.8s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 5/5</span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Stopped</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 5/5</span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 ⠋ Container distributed-task-queue-redis-1         Stopping               <span class=" -Color -Color-Blue">0.1s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.1s </span>
?25h?25l[+] Running 5/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 ⠙ Container distributed-task-queue-redis-1         Stopping               <span class=" -Color -Color-Blue">0.2s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.5s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.6s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.7s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.8s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">0.9s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.0s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.1s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.5s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.6s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.7s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.8s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">1.9s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.0s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.1s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.5s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.6s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.7s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.8s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">2.9s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.0s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.1s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.5s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.6s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.7s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.8s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">3.9s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.0s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.1s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.5s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.6s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.7s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.8s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">4.9s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.0s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.1s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.5s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠴ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.6s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠦ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.7s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠧ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.8s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠇ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">5.9s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠏ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">6.0s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠋ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">6.1s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠙ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">6.2s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠹ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">6.3s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠸ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">6.4s </span>
?25h?25l[+] Running 6/7
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 ⠼ Container distributed-task-queue-rabbitmq-1      Stopping               <span class=" -Color -Color-Blue">6.5s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 7/7</span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">6.5s </span>
 ⠋ Network distributed-task-queue_default           Removing               <span class=" -Color -Color-Blue">0.0s </span>
?25h?25l<span class=" -Color -Color-Blue">[+] Running 8/8</span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-other-worker-1  <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.7s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-flower-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-1        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-api-1           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.5s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-worker-2        <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">2.8s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-redis-1         <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.3s </span>
 <span class=" -Color -Color-Green">✔</span> Container distributed-task-queue-rabbitmq-1      <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">6.5s </span>
 <span class=" -Color -Color-Green">✔</span> Network distributed-task-queue_default           <span class=" -Color -Color-Green">Removed</span>                <span class=" -Color -Color-Blue">0.1s </span>
?25h
</pre></div>
</div>
</div>
</details>
</div>
<hr class="docutils" />
<p>■</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./nb/mlops"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="03-mlflow.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Experiment Tracking</p>
      </div>
    </a>
    <a class="right-next"
       href="04-deployment/notes.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Model Deployment</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#celery-application">Celery application</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#services">Services</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workers">Workers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tasks">Tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flower-ui">Flower UI</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#celery-config">Celery config</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#acknowledgement">Acknowledgement</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#revoking-tasks">Revoking tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stopping-a-worker-process">Stopping a worker process</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#task-prioritization">Task prioritization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tasks-and-results-api">Tasks and Results API</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tasks-endpoints">Tasks endpoints</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results-endpoints">Results endpoints</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pending-and-active-tasks">Pending and active tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#total-pending-tasks">Total pending tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#task-abort-and-revoke">Task abort and revoke</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#revoke-pending-test">Revoke pending test</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#abort-active-test">Abort active test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-further-celery">Appendix: Further Celery</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-options">More options</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows">Workflows</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#signals">Signals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#broker-config">Broker config</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-task-routing">Appendix: Task routing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-periodic-tasks">Appendix: Periodic tasks</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 𝗽𝗮𝗿𝘁𝗶𝗰𝗹𝗲𝟭𝟯𝟯𝟭. Powered by <a href="https://jupyterbook.org">Jupyter Book</a>.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>